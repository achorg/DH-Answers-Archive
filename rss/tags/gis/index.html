<?
/*
Plugin Name: bb Topic Icons
Plugin URI: http://devt.caffeinatedbliss.com/bbpress/topic-icons
Description: Adds configurable icons next to topics based on their status
Author: Paul Hawke
Author URI: http://paul.caffeinatedbliss.com/
Version: 0.6
*/

/****************************************************************************
 *
 * Configure the following constants to fine-tune the CSS classes that are
 * generated, the icon filenames that are used, and the text used in the
 * legend (if you have one displayed).  Note: filenames are likely to be
 * taken away in a future version and replaced with the concept of "icon sets"
 * whose filenames are fixed, so dont get used to editing the filenames,
 * as this will break in future versions.
 *
 ****************************************************************************/

// css class for the unsorted list used in the legend display
define( LEGEND_CLASS, 'topic_icon_legend' );

// busy threshold - a topic with more posts than this is counted as "busy"
// for purposes of picking an icon.
define( BUSY_THRESHOLD, 15 );

// width of the images, in pixels
define( ICON_WIDTH, '20' );

// height of the images, in pixels
define( ICON_HEIGHT, '20' );

// the URL base for where to find the default icon set.
define( ICON_SET_URL_BASE, BB_PLUGIN_URL.'bb-topic-icons/icon-sets/' );

/****************************************************************************
 *
 * Shouldnt be much need to edit anything beyond this point - configuration
 * is all done via the constants (above) and through and admin area page in
 * bbPress at runtime.
 *
 ****************************************************************************/

require( 'bb-topic-icons-api.php' );
require( 'bb-topic-icons-admin.php' );
require( 'interface.status-interpreter.php' );
require( 'interface.status-renderer.php' );
require( 'class.default-status-interpreter.php' );
require( 'class.default-status-renderer.php' );

function topic_icons_legend() {
	$icon_set_name = topic_icons_get_active_icon_set();
	$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;
	$statuses = get_active_status_interpreter()->getAllStatuses();
	$renderer = get_active_status_renderer();
	
	echo '<ul id="'.LEGEND_CLASS.'">';
	for ($i=0; $i < count($statuses); $i++) {
		$image = $renderer->renderStatus($statuses[$i]);
		$tooltip = $renderer->renderStatusTooltip($statuses[$i]);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (isset($image) && strlen($image) > 0 &&
			isset($tooltip) && strlen($tooltip) > 0 && $exists) {
			echo '<li><img src="'.$icon_set_url.'/'.$image.
				'" width="'.ICON_WIDTH.'" height="'.ICON_HEIGHT.
				'" align="absmiddle">&nbsp;'.$tooltip.'</li>';
		}
	}
	echo '</ul>';
}

function topic_icons_css() {
	echo "\n<style type=\"text/css\"><!--\n";
	require( 'bb-topic-icons.css' );
	echo "\n--></style>";
}

function topic_icons_label( $label ) {
	global $topic;
	
	if (bb_is_front() || bb_is_forum() || bb_is_view() || bb_is_tag()) {		
		$icon_set_name = topic_icons_get_active_icon_set();
		$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;

		$status = get_active_status_interpreter()->getStatus(bb_get_location(), $topic);
		$renderer = get_active_status_renderer();
		$image = $renderer->renderStatus($status);
		$tooltip = $renderer->renderStatusTooltip($status);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (!$exists) {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), ICON_SET_URL_BASE.'/empty.png', ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		} else if (strlen($tooltip) > 0) {		
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"><span>%s</span></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $tooltip, $label);
		} else {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		}
	}
	
	return $label;
}

function topic_icons_init( ) {
	remove_filter('bb_topic_labels', 'bb_closed_label', 10);
	remove_filter('bb_topic_labels', 'bb_sticky_label', 20);

	add_filter('bb_topic_labels', 'topic_icons_label', 11);

	add_action('bb_head', 'topic_icons_css');

	add_action('bb_admin_menu_generator', 'topic_icons_admin_page_add');
	add_action('bb_admin-header.php', 'topic_icons_admin_page_process');
	
	topic_icons_register_status_interpreter('default', new DefaultStatusInterpreter(BUSY_THRESHOLD));
	topic_icons_register_status_renderer('default', new DefaultStatusRenderer());
}

topic_icons_init();

?>
<?xml version="1.0" encoding="UTF-8"?>
<!-- generator="bbPress/1.0.2" -->
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Digital Humanities Questions &#38; Answers &#187; Tag: GIS - Recent Posts</title>
		<link>http://digitalhumanities.org/answers/tags/gis</link>
		<description>Digital Humanities Questions &amp; Answers &#187; Tag: GIS - Recent Posts</description>
		<language>en-US</language>
		<pubDate>Sun, 24 Mar 2019 17:08:23 +0000</pubDate>
		<generator>http://bbpress.org/?v=1.0.2</generator>
		<textInput>
			<title><![CDATA[Search]]></title>
			<description><![CDATA[Search all topics from these forums.]]></description>
			<name>q</name>
			<link>http://digitalhumanities.org/answers/search.php</link>
		</textInput>
		<atom:link href="http://digitalhumanities.org/answers/rss/tags/gis" rel="self" type="application/rss+xml" />

		<item>
			 
				<title>aelang on "What software are people using for GIS?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-software-are-people-using-for-gis#post-2285</link>
			<pubDate>Thu, 19 Feb 2015 18:30:36 +0000</pubDate>
			<dc:creator>aelang</dc:creator>
			<guid isPermaLink="false">2285@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Posting here to say that the good people at Edina are currently developing some training materials for QGIS which they are going to pilot on my masters students, then make available to everyone. So those should be available sometime in early 2016.&#60;/p&#62;
&#60;p&#62;The high cost of ArcGIS licences means that for me, I'm going with QGIS over ArcGIS for both teaching and research. I did the DHSI GIS course (highly recommended!) some years ago, and that was actually pretty helpful for learning QGIS. There are significant differences between the two packages, of course, but once you have learnt the basic functionality of ArcGIS, it's not too difficult to figure out the equivalent, or near-equivalent, thing in QGIS.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Ethan Gruber on "What software are people using for GIS?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-software-are-people-using-for-gis#post-2253</link>
			<pubDate>Fri, 07 Nov 2014 13:43:26 +0000</pubDate>
			<dc:creator>Ethan Gruber</dc:creator>
			<guid isPermaLink="false">2253@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I've used QGIS, and I like it quite a bit. It may not be as powerful as ArcGIS yet, but with an open source backing for the plugins, I think the ceiling for the software is quite high.&#60;/p&#62;
&#60;p&#62;Since the majority of students are now using Macs, I just don't think it's worth it to set up the virtual machines. After all, in order to get Windows to function properly, you still need an active license, correct? Unless, of course, you are hooking them up with pirated copies, which, as an institution, is probably a bad idea.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>quinnanya on "What software are people using for GIS?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-software-are-people-using-for-gis#post-2250</link>
			<pubDate>Thu, 06 Nov 2014 16:55:44 +0000</pubDate>
			<dc:creator>quinnanya</dc:creator>
			<guid isPermaLink="false">2250@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;We're looking at developing a set of workshops, resources, etc. for folks who are interested in using GIS as part of their humanities / social science research, but we're debating what software to use for it (ArcGIS or QGIS, though other suggestions are welcome). &#60;/p&#62;
&#60;p&#62;ArcGIS is the industry standard, but it doesn't work on Macs, which means that probably a majority of the students would have to go through the hassle of setting up a virtual Windows desktop to even access it. That's making us take a close look at QGIS, but we don't want to train students in software that most people aren't using.&#60;/p&#62;
&#60;p&#62;I know DHSI's GIS course is mostly based on ArcGIS -- what is everyone else using?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>LAB1100 on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps/page/2#post-2204</link>
			<pubDate>Sat, 21 Jun 2014 13:41:20 +0000</pubDate>
			<dc:creator>LAB1100</dc:creator>
			<guid isPermaLink="false">2204@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;You also might want to check out our tool nodegoat: &#60;a href=&#34;http://nodegoat.net&#34; rel=&#34;nofollow&#34;&#62;http://nodegoat.net&#60;/a&#62; This web based research environment provides diachronic maps and social graphs. nodegoat unites data management and data visualisation. Freely usable for individual researchers. For more info check: &#60;a href=&#34;http://nodegoat.net/blog.s/3/enter-curate--explore-data&#34; rel=&#34;nofollow&#34;&#62;http://nodegoat.net/blog.s/3/enter-curate--explore-data&#60;/a&#62; To see some data of correspondence between nineteenth century intellectuals in action, see: &#60;a href=&#34;https://www.youtube.com/watch?v=XYt7H3y9-Ik&#34; rel=&#34;nofollow&#34;&#62;https://www.youtube.com/watch?v=XYt7H3y9-Ik&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Miriam Posner on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2203</link>
			<pubDate>Fri, 20 Jun 2014 21:43:13 +0000</pubDate>
			<dc:creator>Miriam Posner</dc:creator>
			<guid isPermaLink="false">2203@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/bmschmidt'&#62;bmschmidt&#60;/a&#62;@gmail.com's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2202&#34;&#62;post&#60;/a&#62;:&#60;/em&#62; Thanks, Ben. That's really helpful. What about this, though: You just wanted to get a sense of where an art object has traveled over time, and want to keep those trajectory lines in your mind. Do you think lines make sense in that case? I guess the problem you're pointing out is sort of a problem with discrete vs. continuous data — the objects, or the writers, stop moving at some point, but the lines seem to imply that they continuously move.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Ben Schmidt on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2202</link>
			<pubDate>Fri, 20 Jun 2014 21:32:33 +0000</pubDate>
			<dc:creator>Ben Schmidt</dc:creator>
			<guid isPermaLink="false">2202@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @ted.underwood.3@gmail.com's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2201&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Yeah, I was prompted to finally roll that layout out by this thread… &#60;/p&#62;
&#60;p&#62;It would be pretty easy to roll that into a version that does &#60;a href=&#34;https://www.youtube.com/watch?v=5TY5Fp6O5iM&#34;&#62;Indiana Jones–style animations of a single or a group of points onto a map&#60;/a&#62;. I can send anyone a link to my D3-based shipping animations if they want a more involved version.&#60;/p&#62;
&#60;p&#62;The problem is that writers (unlike armies or ships) don't spend most of their time in motion. So if I were going to do this in D3, I wouldn't want lines at all: I'd do something more like &#60;a href=&#34;http://benschmidt.org/LA/&#34;&#62;this, a quick adaptation of a project from years ago about homes of German emigree writers.&#60;/a&#62; You can click around in time and get the animations to see when someone shifts locations, but you don't worry about lines overlapping which doesn't mean anything for individuals.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>ted.underwood.3@gmail.com on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2201</link>
			<pubDate>Thu, 19 Jun 2014 23:59:49 +0000</pubDate>
			<dc:creator>ted.underwood.3@gmail.com</dc:creator>
			<guid isPermaLink="false">2201@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;And voila, Minard's map has become a &#34;tool.&#34; Or at least a d3.js library.&#60;/p&#62;
&#60;p&#62;&#60;a href=&#34;https://twitter.com/benmschmidt/status/479647372201701377&#34; rel=&#34;nofollow&#34;&#62;https://twitter.com/benmschmidt/status/479647372201701377&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Miriam Posner on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2200</link>
			<pubDate>Thu, 19 Jun 2014 03:41:53 +0000</pubDate>
			<dc:creator>Miriam Posner</dc:creator>
			<guid isPermaLink="false">2200@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/lmullen'&#62;lmullen&#60;/a&#62;'s &#60;a href=&#34;http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2199&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;br /&#62;
Yes, I've been thinking along similar lines. I linked above to &#60;a href=&#34;http://www.oeaw.ac.at/vid/download/WP2014_02.pdf&#34;&#62;an article&#60;/a&#62; on the subject. Still, I have in mind not necessarily large-scale migration patterns, but the movements of, say, a group of writers. In this case, it does seem as though a map would be helpful, since you'd be able to see where these people might have intersected.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>lmullen on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2199</link>
			<pubDate>Thu, 19 Jun 2014 01:04:21 +0000</pubDate>
			<dc:creator>lmullen</dc:creator>
			<guid isPermaLink="false">2199@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I'd second the idea that a map is not always the best for showing flows, even for geographic data. Ben Schmidt has an &#60;a href=&#34;http://benschmidt.org/2014/06/05/optimally-ordering-geographical-entities-in-linear-space/&#34;&#62;interesting post&#60;/a&#62; on how to order the US states in charts to show regional connections. Though not showing flows, his visualizations in that post might offer an interesting alternative.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>angela.zoss@gmail.com on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2198</link>
			<pubDate>Thu, 19 Jun 2014 01:00:02 +0000</pubDate>
			<dc:creator>angela.zoss@gmail.com</dc:creator>
			<guid isPermaLink="false">2198@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Other, more powerful mapping tools like &#60;a href=&#34;http://blogs.esri.com/esri/apl/2012/09/12/generating-distributive-flow-maps-with-arcgis/&#34;&#62;ArcGIS&#60;/a&#62; and &#60;a href=&#34;http://plugins.qgis.org/plugins/FlowMapper/&#34;&#62;QGIS&#60;/a&#62; might be good options for publication quality graphics.  For a tool that includes web hosting and interactivity and doesn't require programming, perhaps &#60;a href=&#34;http://kb.tableausoftware.com/articles/knowledgebase/using-path-shelf-pattern-analysis&#34;&#62;Tableau&#60;/a&#62;.  &#60;/p&#62;
&#60;p&#62;If you have an interest in non-map flow diagrams, I've seen people use chord diagrams to show movement between locations (&#60;a href=&#34;http://www.wired.com/2013/11/mapping-migration-without-a-map/&#34;&#62;US State migration example&#60;/a&#62;); those can be created manually with JavaScript in &#60;a href=&#34;http://bl.ocks.org/mbostock/1046712&#34;&#62;d3&#60;/a&#62; or perhaps automatically with &#60;a href=&#34;http://circos.ca/&#34;&#62;Circos&#60;/a&#62;.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Miriam Posner on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2197</link>
			<pubDate>Wed, 18 Jun 2014 00:47:13 +0000</pubDate>
			<dc:creator>Miriam Posner</dc:creator>
			<guid isPermaLink="false">2197@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Back on Twitter, Jason Heppler suggested &#60;a href=&#34;http://palladio.designhumanities.org/&#34;&#62;Palladio&#60;/a&#62;, which I'd neglected. That seems very promising for this kind of thing.&#60;/p&#62;
&#60;p&#62;Lincoln Mullen suggests &#60;a href=&#34;http://cartodb.github.io/odyssey.js/index.html&#34;&#62;Odyssey.js&#60;/a&#62;.&#60;/p&#62;
&#60;p&#62;Zoe Borovsky points out that you can do &#60;a href=&#34;http://geocommons.com/tour&#34;&#62;temporal analysis maps&#60;/a&#62; with GeoCommons. I'm not immediately seeing a way it can draw arcs to show movement, but I will keep digging.&#60;/p&#62;
&#60;p&#62;&#60;a href=&#34;http://cartodb.com/&#34;&#62;CartoDB&#60;/a&#62; can also animate movement with its &#60;a href=&#34;http://vimeo.com/79115503&#34;&#62;Torque library&#60;/a&#62;.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Miriam Posner on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2196</link>
			<pubDate>Wed, 18 Jun 2014 00:37:49 +0000</pubDate>
			<dc:creator>Miriam Posner</dc:creator>
			<guid isPermaLink="false">2196@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @Bethany Nowviskie's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2195&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;br /&#62;
Thanks, Bethany! Super helpful. Googling yielded &#60;a href=&#34;http://piratepad.net/visualizingflowandmovement&#34;&#62;Barbara Hui's notes&#60;/a&#62; from that workshop, which look very promising. And the white paper is &#60;a href=&#34;https://securegrants.neh.gov/publicquery/main.aspx?f=1&#38;amp;gn=HD-51228-11&#34;&#62;here&#60;/a&#62;. One outcome of the workshop was &#60;a href=&#34;http://lens.spatial.redlands.edu/?page_id=748&#34;&#62;this&#60;/a&#62; very useful taxonomy of flow maps.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Bethany Nowviskie on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2195</link>
			<pubDate>Wed, 18 Jun 2014 00:29:29 +0000</pubDate>
			<dc:creator>Bethany Nowviskie</dc:creator>
			<guid isPermaLink="false">2195@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;A couple of years ago, the fabulous Diana Sinton hosted a workshop at Redlands called &#34;Visualizing Flow &#38;amp; Movement in the Humanities.&#34; It was funded by the NEH, so there must be a whitepaper. Diana was one of the faculty for our own NEH Advanced Topics institute on Spatial Humanities at the Scholars' Lab.  It might be worth taking a peek at the Zotero library associated with #&#60;a href='http://digitalhumanities.org/answers/tags/geoinst'&#62;geoinst&#60;/a&#62;: &#60;a href=&#34;http://spatial.scholarslab.org/resources/&#34; rel=&#34;nofollow&#34;&#62;http://spatial.scholarslab.org/resources/&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>lmullen on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2194</link>
			<pubDate>Tue, 17 Jun 2014 22:37:00 +0000</pubDate>
			<dc:creator>lmullen</dc:creator>
			<guid isPermaLink="false">2194@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;a href=&#34;http://storymap.knightlab.com/&#34;&#62;Story Map JS&#60;/a&#62; might work for showing change over time, and it's definitely good for including annotations of maps.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>wendy.f.hsu@gmail.com on "Tools for making flow maps"</title>
						<link>http://digitalhumanities.org/answers/topic/tools-for-making-flow-maps#post-2193</link>
			<pubDate>Tue, 17 Jun 2014 22:34:14 +0000</pubDate>
			<dc:creator>wendy.f.hsu@gmail.com</dc:creator>
			<guid isPermaLink="false">2193@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;A couple of years ago, I used &#60;a href=&#34;http://www.scribblemaps.com/&#34;&#62;Scribble Maps&#60;/a&#62; to create music analysis related to a migration history. I blogged about it &#60;a href=&#34;http://beingwendyhsu.info/?p=913&#34;&#62;here&#60;/a&#62;&#60;/p&#62;
&#60;p&#62;Now that there's Neatline, I would use that in a heartbeat.
&#60;/p&#62;</description>
		</item>

	</channel>
</rss>
