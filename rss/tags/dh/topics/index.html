<?
/*
Plugin Name: bb Topic Icons
Plugin URI: http://devt.caffeinatedbliss.com/bbpress/topic-icons
Description: Adds configurable icons next to topics based on their status
Author: Paul Hawke
Author URI: http://paul.caffeinatedbliss.com/
Version: 0.6
*/

/****************************************************************************
 *
 * Configure the following constants to fine-tune the CSS classes that are
 * generated, the icon filenames that are used, and the text used in the
 * legend (if you have one displayed).  Note: filenames are likely to be
 * taken away in a future version and replaced with the concept of "icon sets"
 * whose filenames are fixed, so dont get used to editing the filenames,
 * as this will break in future versions.
 *
 ****************************************************************************/

// css class for the unsorted list used in the legend display
define( LEGEND_CLASS, 'topic_icon_legend' );

// busy threshold - a topic with more posts than this is counted as "busy"
// for purposes of picking an icon.
define( BUSY_THRESHOLD, 15 );

// width of the images, in pixels
define( ICON_WIDTH, '20' );

// height of the images, in pixels
define( ICON_HEIGHT, '20' );

// the URL base for where to find the default icon set.
define( ICON_SET_URL_BASE, BB_PLUGIN_URL.'bb-topic-icons/icon-sets/' );

/****************************************************************************
 *
 * Shouldnt be much need to edit anything beyond this point - configuration
 * is all done via the constants (above) and through and admin area page in
 * bbPress at runtime.
 *
 ****************************************************************************/

require( 'bb-topic-icons-api.php' );
require( 'bb-topic-icons-admin.php' );
require( 'interface.status-interpreter.php' );
require( 'interface.status-renderer.php' );
require( 'class.default-status-interpreter.php' );
require( 'class.default-status-renderer.php' );

function topic_icons_legend() {
	$icon_set_name = topic_icons_get_active_icon_set();
	$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;
	$statuses = get_active_status_interpreter()->getAllStatuses();
	$renderer = get_active_status_renderer();
	
	echo '<ul id="'.LEGEND_CLASS.'">';
	for ($i=0; $i < count($statuses); $i++) {
		$image = $renderer->renderStatus($statuses[$i]);
		$tooltip = $renderer->renderStatusTooltip($statuses[$i]);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (isset($image) && strlen($image) > 0 &&
			isset($tooltip) && strlen($tooltip) > 0 && $exists) {
			echo '<li><img src="'.$icon_set_url.'/'.$image.
				'" width="'.ICON_WIDTH.'" height="'.ICON_HEIGHT.
				'" align="absmiddle">&nbsp;'.$tooltip.'</li>';
		}
	}
	echo '</ul>';
}

function topic_icons_css() {
	echo "\n<style type=\"text/css\"><!--\n";
	require( 'bb-topic-icons.css' );
	echo "\n--></style>";
}

function topic_icons_label( $label ) {
	global $topic;
	
	if (bb_is_front() || bb_is_forum() || bb_is_view() || bb_is_tag()) {		
		$icon_set_name = topic_icons_get_active_icon_set();
		$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;

		$status = get_active_status_interpreter()->getStatus(bb_get_location(), $topic);
		$renderer = get_active_status_renderer();
		$image = $renderer->renderStatus($status);
		$tooltip = $renderer->renderStatusTooltip($status);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (!$exists) {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), ICON_SET_URL_BASE.'/empty.png', ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		} else if (strlen($tooltip) > 0) {		
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"><span>%s</span></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $tooltip, $label);
		} else {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		}
	}
	
	return $label;
}

function topic_icons_init( ) {
	remove_filter('bb_topic_labels', 'bb_closed_label', 10);
	remove_filter('bb_topic_labels', 'bb_sticky_label', 20);

	add_filter('bb_topic_labels', 'topic_icons_label', 11);

	add_action('bb_head', 'topic_icons_css');

	add_action('bb_admin_menu_generator', 'topic_icons_admin_page_add');
	add_action('bb_admin-header.php', 'topic_icons_admin_page_process');
	
	topic_icons_register_status_interpreter('default', new DefaultStatusInterpreter(BUSY_THRESHOLD));
	topic_icons_register_status_renderer('default', new DefaultStatusRenderer());
}

topic_icons_init();

?>
<?xml version="1.0" encoding="UTF-8"?>
<!-- generator="bbPress/1.0.2" -->
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Digital Humanities Questions &#38; Answers &#187; Tag: DH - Recent Topics</title>
		<link>http://digitalhumanities.org/answers/tags/dh</link>
		<description>Digital Humanities Questions &amp; Answers &#187; Tag: DH - Recent Topics</description>
		<language>en-US</language>
		<pubDate>Sun, 24 Mar 2019 17:08:05 +0000</pubDate>
		<generator>http://bbpress.org/?v=1.0.2</generator>
		<textInput>
			<title><![CDATA[Search]]></title>
			<description><![CDATA[Search all topics from these forums.]]></description>
			<name>q</name>
			<link>http://digitalhumanities.org/answers/search.php</link>
		</textInput>
		<atom:link href="http://digitalhumanities.org/answers/rss/tags/dh/topics" rel="self" type="application/rss+xml" />

		<item>
			 
				<title>alyson.musser on "DH Thesaurus - Participate in an Evaluation Survey"</title>
						<link>http://digitalhumanities.org/answers/topic/dh-thesaurus-participate-in-an-evaluation-survey#post-2322</link>
			<pubDate>Fri, 24 Apr 2015 18:09:09 +0000</pubDate>
			<dc:creator>alyson.musser</dc:creator>
			<guid isPermaLink="false">2322@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Hi all, I'm looking for researchers/enthusiasts of the digital humanities to participate in a survey evaluating a digital humanities thesaurus.  &#60;/p&#62;
&#60;p&#62;The survey is here: &#60;a href=&#34;http://goo.gl/forms/DyKllxSLMC&#34; rel=&#34;nofollow&#34;&#62;http://goo.gl/forms/DyKllxSLMC&#60;/a&#62;  and the thesaurus is here: &#60;a href=&#34;http://dhthesaurus.com/&#34; rel=&#34;nofollow&#34;&#62;http://dhthesaurus.com/&#60;/a&#62; &#60;/p&#62;
&#60;p&#62;The survey should only take about 15-20 minutes and I would greatly value your input and feedback. If you leave your email at the end of the survey, you'll be entered in a drawing to win a $5 Starbuck gift card. Thanks!
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>DigitalHumanitiesScholar on "TEI question"</title>
						<link>http://digitalhumanities.org/answers/topic/tei-question#post-2051</link>
			<pubDate>Mon, 29 Jul 2013 06:51:21 +0000</pubDate>
			<dc:creator>DigitalHumanitiesScholar</dc:creator>
			<guid isPermaLink="false">2051@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Hi,&#60;/p&#62;
&#60;p&#62;I have a beginners question re TEI 5 and would be grateful for any suggestions re same.&#60;/p&#62;
&#60;p&#62;How does one begin to encode metdata? ie: I have a transcription and am doing a very light encoding thereof - just &#38;lt;head&#38;gt;&#38;lt;/head&#38;gt;, &#38;lt;person&#38;gt;&#38;lt;/person&#38;gt;, &#38;lt;place&#38;gt;&#38;lt;/place&#38;gt; (which hopefully are correct!). If I have footnotes re certain parts of the main body of text, how to encode it and where to I place it in the TEI that I am writing in Oxygen Editor (ie: How do I show what the info refers to? Do I keep the footnote system?)&#60;/p&#62;
&#60;p&#62;Thanks.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>DigitalHumanitiesScholar on "What is Digital Humanities?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-is-digital-humanities-1#post-1998</link>
			<pubDate>Sun, 05 May 2013 10:43:29 +0000</pubDate>
			<dc:creator>DigitalHumanitiesScholar</dc:creator>
			<guid isPermaLink="false">1998@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Hello Digital Humanists,&#60;/p&#62;
&#60;p&#62;I am creating a video from crowdsourced answers to the question &#34;What is Digital Humanities?&#34;. I would appreciate any short response you could provide re same and permission to publish your answer in the video. The aim of this project is to provide a brief introduction to DH for novice digital humanists or those who are not familiar with the field.&#60;/p&#62;
&#60;p&#62;Looking forward to hearing your suggestions. Please also provide your Twitter username re acknowledging your contribution.&#60;/p&#62;
&#60;p&#62;Many thanks,&#60;/p&#62;
&#60;p&#62;Róisín O'Brien&#60;br /&#62;
&#60;a href=&#34;http://www.roisinobrien.com&#34; rel=&#34;nofollow&#34;&#62;http://www.roisinobrien.com&#60;/a&#62;&#60;br /&#62;
&#60;a href=&#34;http://www.twitter.com/roisinanneob&#34; rel=&#34;nofollow&#34;&#62;http://www.twitter.com/roisinanneob&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>alangpike on "Big data projects using IMDB?"</title>
						<link>http://digitalhumanities.org/answers/topic/big-data-projects-using-imdb#post-2019</link>
			<pubDate>Thu, 06 Jun 2013 12:42:29 +0000</pubDate>
			<dc:creator>alangpike</dc:creator>
			<guid isPermaLink="false">2019@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I am in the early stages of my dissertation and, as I explore the possible DH methods that might apply to my work, am wondering if there might be a way for the DH community to take advantage of the mountain of data at IMDB. I have heard from some folks that they have been unfriendly to researchers, but thought it might be worth some serious effort to make some (all!) of their data, reviews, etc. available to film and media studies scholars. The possibilities for DH methods are virtually limitless. For my own work, data visualizations, social network analysis of cast and crew, etc. are all intriguing possibilities. Has anyone out there gotten permission from IMDB to use data crawlers for scholarly research? Has anyone tried to do so and been denied?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>boybot16@gmail.com on "Have you used MongoDB for DH project?"</title>
						<link>http://digitalhumanities.org/answers/topic/have-you-used-mongodb-for-dh-project#post-1850</link>
			<pubDate>Sat, 05 Jan 2013 15:19:42 +0000</pubDate>
			<dc:creator>boybot16@gmail.com</dc:creator>
			<guid isPermaLink="false">1850@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;We have a DH project that's currently uses MySQL for the database, and it works very well.&#60;/p&#62;
&#60;p&#62;There has been much recent talk about NoSQL databases, particularly MongoDB, promising flexibility and scalability. We're considering re-writing the backend. Is anyone in the DH community seriously using MongoDB?&#60;/p&#62;
&#60;p&#62;If you have used MongoDB for a DH project, what has been your experience with it? Biggest joy? Gotchas to look out for? Is conversion worth it for libraries and archives open source projects?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>elotroalex on "What libraries are doing a librarian re-skilling program?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-libraries-are-doing-a-librarian-re-skilling-program#post-1812</link>
			<pubDate>Mon, 03 Dec 2012 20:28:43 +0000</pubDate>
			<dc:creator>elotroalex</dc:creator>
			<guid isPermaLink="false">1812@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;At Columbia University we are embarking on a two year program to re-skill our librarians to be the consulting arm of our re-envisioned Digital Humanities Center. We are not finding much on our environmental scan other than @trevormuñoz' DH Incubator, some of the work that @karikraus is doing, and the work at Indiana by Angela Courtney (@englishlitlib) and Harriett Green (@greenharr) at Illinois. Do you know more? Let's get this band on the road.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>ttasovac on "What was the book title that Busa couldn&#039;t remember?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-was-the-book-title-that-busa-couldnt-remember#post-1641</link>
			<pubDate>Sun, 06 May 2012 09:34:11 +0000</pubDate>
			<dc:creator>ttasovac</dc:creator>
			<guid isPermaLink="false">1641@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Busa (1980) writes: &#60;/p&#62;
&#60;blockquote&#62;&#60;p&#62;
Although some say that I am the pioneer of the computers in the humanities, such a title needs a good deal of nuancing... [O]n the stacks of the IBM library in New York City I had spotted a book (whose title I have forgotten), which was printed some time between 1920 and 1940: in it someone mentioned that it was possible to make lists of names by means of punched cards.&#60;/p&#62;
&#60;/blockquote&#62;
&#60;p&#62;Has anybody figured out what book he may have had in mind?&#60;/p&#62;
&#60;p&#62;All best,&#60;br /&#62;
Toma
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Rosvita TEXTWinder on "Best way to map &#38; track debates through several little 1920s magazines?"</title>
						<link>http://digitalhumanities.org/answers/topic/best-way-to-map-track-debates-through-several-little-1920s-magazines#post-1610</link>
			<pubDate>Wed, 18 Apr 2012 15:28:25 +0000</pubDate>
			<dc:creator>Rosvita TEXTWinder</dc:creator>
			<guid isPermaLink="false">1610@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I'd like to map and track ideas that were debated in several little magazines of the 1920s to present a visualisation of where those &#34;conversations&#34; took place and how they changed with each contribution. It would be great to learn how others would approach this. Thanks!
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>bllestock on "What&#039;s the DH scene like in the Chicago area?"</title>
						<link>http://digitalhumanities.org/answers/topic/im-considering-a-move-to-the-chicago-area-whats-the-dh-scene-like-there#post-1571</link>
			<pubDate>Wed, 21 Mar 2012 14:24:38 +0000</pubDate>
			<dc:creator>bllestock</dc:creator>
			<guid isPermaLink="false">1571@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I may be moving to the Chicago area this summer (after graduating with my MA from UVa) and would like to continue working in DH. Any insight on the kind of DH work being done in Chicago or on institutions I should consider in my job-hunt would be much appreciated!
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>James Neal on "Answers to Christine L. Borgman&#039;s  - Where are the social studies of DH?"</title>
						<link>http://digitalhumanities.org/answers/topic/answers-to-christine-l-borgmans-where-are-the-social-studies-of-dh#post-1382</link>
			<pubDate>Sun, 18 Sep 2011 14:05:40 +0000</pubDate>
			<dc:creator>James Neal</dc:creator>
			<guid isPermaLink="false">1382@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;In 2009, writing in Digital Humanities Quarterly (DHQ), Christine L. Borgman asks the question: &#34;Where are the social studies of digital humanities?&#34; as part of an article entitled, &#34;The Digital Future is Now: A Call to Action for the Humanities&#34;. Borgman elaborates, &#34;Why is no one following digital humanities scholars around to understand their practices, in the way that scientists have been studied for the last several decades?  ... The humanities community should invite more social scientists as research partners and should make themselves available as objects of study. In doing so, the community can learn more about itself and apply the lessons to the design of tools, services, policies, and infrastructure.&#34;&#60;/p&#62;
&#60;p&#62;This year I'm writing a Master's thesis with the current working title of &#34;Towards an Ethnography of the Digital Humanities: A Study of DH and the Future of Research Libraries&#34;.  My focus will be on the histories and futures of CHNM, MITH, and the Scholar's Lab.&#60;/p&#62;
&#60;p&#62;Any advice, suggested reading, or input is greatly appreciated. Thanks.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>DrK on "Besides netvibes, what other *FREE* web portal dashboards are out there?"</title>
						<link>http://digitalhumanities.org/answers/topic/besides-netvibes-what-other-free-web-portal-dashboards-are-out-there#post-1316</link>
			<pubDate>Tue, 02 Aug 2011 18:58:24 +0000</pubDate>
			<dc:creator>DrK</dc:creator>
			<guid isPermaLink="false">1316@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;B&#34;H&#60;/p&#62;
&#60;p&#62;I want to prevent &#34;internet overload&#34; for my students in my DH English class, so someone suggested netvibes as a good web portal for them to start building their personal learning environment online.  Are there any other free web-portal dashboards out there I should know about?  What are your suggestions?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>jonvoss on "What&#039;s the difference between Digital Humanities and New Media?"</title>
						<link>http://digitalhumanities.org/answers/topic/whats-the-difference-between-digital-humanities-and-new-media#post-816</link>
			<pubDate>Sun, 12 Dec 2010 23:43:03 +0000</pubDate>
			<dc:creator>jonvoss</dc:creator>
			<guid isPermaLink="false">816@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;What are the differences within and outside an academic context?  Is there much overlap?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Nicholas Pavkovic on "What is Digital Humanities?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-is-digital-humanities#post-289</link>
			<pubDate>Fri, 01 Oct 2010 03:06:23 +0000</pubDate>
			<dc:creator>Nicholas Pavkovic</dc:creator>
			<guid isPermaLink="false">289@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Sorry to be so green, and I apologize if this issue has already been addressed somewhere the forums. If a definition is elusive, a list of example projects would be helpful.&#60;/p&#62;
&#60;p&#62;Thanks!
&#60;/p&#62;</description>
		</item>

	</channel>
</rss>
