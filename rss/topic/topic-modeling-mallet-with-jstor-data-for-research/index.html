<?xml version="1.0" encoding="UTF-8"?>
<!-- generator="bbPress/1.0.2" -->
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Digital Humanities Questions &#38; Answers &#187; Topic: Topic Modeling (MALLET) with JSTOR Data For Research</title>
		<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research</link>
		<description>Digital Humanities Questions &amp; Answers &#187; Topic: Topic Modeling (MALLET) with JSTOR Data For Research</description>
		<language>en-US</language>
		<pubDate>Wed, 14 Sep 2016 13:34:43 +0000</pubDate>
		<generator>http://bbpress.org/?v=1.0.2</generator>
		<textInput>
			<title><![CDATA[Search]]></title>
			<description><![CDATA[Search all topics from these forums.]]></description>
			<name>q</name>
			<link>http://digitalhumanities.org/answers/search.php</link>
		</textInput>
		<atom:link href="/DH-Answers-Archive/rss/topic/topic-modeling-mallet-with-jstor-data-for-research" rel="self" type="application/rss+xml" />

		<item>
			 
				<title>Ben Marwick on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-2142</link>
			<pubDate>Thu, 30 Jan 2014 19:50:12 +0000</pubDate>
			<dc:creator>Ben Marwick</dc:creator>
			<guid isPermaLink="false">2142@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @Ben Marwick's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1842&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Just a short follow-up, I have now bundled my snippets into a more complete R package for working with JSTOR DFR data. It takes DFR output and does ngrams, word correlations over time, document clustering and topic modelling (with MALLET or in R, and inlcuding hot and cold topic identification): &#60;a href=&#34;https://github.com/UW-ARCHY-textual-macroanalysis-lab/JSTORr&#34; rel=&#34;nofollow&#34;&#62;https://github.com/UW-ARCHY-textual-macroanalysis-lab/JSTORr&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>johnlaudun on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1932</link>
			<pubDate>Wed, 13 Mar 2013 18:43:40 +0000</pubDate>
			<dc:creator>johnlaudun</dc:creator>
			<guid isPermaLink="false">1932@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @Michael Widner's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1872&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;I didn't know about GenSim. What a great library for Python, and the site has some really nice explanatory material on it, too. Thanks for the link.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Michael Widner on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1872</link>
			<pubDate>Fri, 01 Feb 2013 15:11:14 +0000</pubDate>
			<dc:creator>Michael Widner</dc:creator>
			<guid isPermaLink="false">1872@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;If you're planning on working in Python anyway, you might want to look at the gensim library: &#60;a href=&#34;http://radimrehurek.com/gensim/&#34; rel=&#34;nofollow&#34;&#62;http://radimrehurek.com/gensim/&#60;/a&#62; It would let you perform some topic modeling in the code, so wouldn't require the stop-gap between word frequencies and mallet.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Ben Marwick on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1842</link>
			<pubDate>Mon, 31 Dec 2012 18:35:36 +0000</pubDate>
			<dc:creator>Ben Marwick</dc:creator>
			<guid isPermaLink="false">1842@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/cforster'&#62;cforster&#60;/a&#62;'s &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1767&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Here are a few lines of R that I'm working with for topic modelling. These lines should:&#60;/p&#62;
&#60;p&#62;1. read in the JSTOR CSV wordcount files to R&#60;br /&#62;
2. convert them from a table of words and their counts to a 'bag of words'&#60;br /&#62;
3. for each CSV file, create a txt file of the 'bag of words' ready for MALLET&#60;/p&#62;
&#60;p&#62;A sample of 1000 articles from 'American Antiquity' takes about 7 sec to read in the CSV files and about 6 sec to write the 'bag-of-words' txt files&#60;/p&#62;


&#60;div class=&#34;bb_syntax&#34;&#62;&#60;table&#62;&#60;tr&#62;&#60;td class=&#34;line_numbers&#34;&#62;&#60;pre&#62;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
&#60;/pre&#62;&#60;/td&#62;&#60;td class=&#34;code&#34;&#62;&#60;pre class=&#34;r&#34; style=&#34;font-family:monospace;&#34;&#62;# set working directory, ie. location of JSTOR DfR CSV
# files on the computer
setwd(&#38;quot;C:\\some directory with JSTOR DfR CSV files&#38;quot;)
&#38;nbsp;
# create a list of all the CSV files
myFiles &#38;lt;- list.files(pattern=&#38;quot;*.csv&#124;CSV&#38;quot;)
&#38;nbsp;
# read in all the CSV files to an R data object
myData &#38;lt;-  lapply(myFiles, read.csv)
&#38;nbsp;
# assign file names to each dataframe in the list
names(myData) &#38;lt;- myFiles
&#38;nbsp;
# Here's the step where we turn the JSTOR DfR 'wordcount' into
# the 'bag of words' that's typically needed for topic modelling
# The R process is 'untable-ing' each CSV file into a
# list of data frames, one data frame per file
myUntabledData &#38;lt;- sapply(1:length(myData),
  function(x) {rep(myData[[x]]$WORDCOUNTS, times = myData[[x]]$WEIGHT)})
&#38;nbsp;
# And here's the step where we create individual txt files
# for each data frame (formerly a CSV file) that should be suitable for
# input into MALLET.
names(myUntabledData) &#38;lt;- myFiles
sapply(myFiles,
  function (x) write.table(myUntabledData[x], file=paste(x, &#38;quot;txt&#38;quot;, sep=&#38;quot;.&#38;quot;),
                          quote = FALSE, row.names = FALSE, eol = &#38;quot; &#38;quot; ))
&#38;nbsp;
# Look in the working directory to find the txt files&#60;/pre&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/div&#62;



&#60;p&#62;`&#60;/p&#62;
&#60;p&#62;I have a few more snippets that use the citations CSV for filtering and attaching biblio data to the R data and topic modelling using R (both packages) and MALLET. Some of these are here: &#60;a href=&#34;https://gist.github.com/benmarwick&#34; rel=&#34;nofollow&#34;&#62;https://gist.github.com/benmarwick&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Andrew Goldstone on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1788</link>
			<pubDate>Mon, 12 Nov 2012 17:14:44 +0000</pubDate>
			<dc:creator>Andrew Goldstone</dc:creator>
			<guid isPermaLink="false">1788@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/cforster'&#62;cforster&#60;/a&#62;'s &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1773&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Looked again at this, am embarrased by that snippet. Here's a whole script for making bags of words from jstor's wordcount csv files: &#60;a href=&#34;https://github.com/agoldst/dfr-analysis/blob/master/count2txt&#34; rel=&#34;nofollow&#34;&#62;https://github.com/agoldst/dfr-analysis/blob/master/count2txt&#60;/a&#62; . It is still in perl, so there.&#60;/p&#62;
&#60;p&#62;I couldn't get &#60;code&#62;mallet train-topics&#60;/code&#62; to work on an instance file produced from &#60;code&#62;mallet import-svmlight&#60;/code&#62;, but I didn't try very hard.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>cforster on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1773</link>
			<pubDate>Mon, 29 Oct 2012 09:48:31 +0000</pubDate>
			<dc:creator>cforster</dc:creator>
			<guid isPermaLink="false">1773@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @Andrew Goldstone's &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1771&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Thanks very much; I'll likely cobble together a similar script in Python (Perl? What is this, the nineties? I kid... I kid...). Very much appreciate it.&#60;/p&#62;
&#60;p&#62;And thanks for the &#34;fla&#34; filter tip. I may revise my query with that in mind. I'm a little suspicious of the data because I ran a quick word count for one file against the data they provided and it didn't seem to match up. I'll look into that at greater length and then get in touch with the DfR folks should my suspicion be borne out.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>cforster on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1772</link>
			<pubDate>Mon, 29 Oct 2012 09:45:36 +0000</pubDate>
			<dc:creator>cforster</dc:creator>
			<guid isPermaLink="false">1772@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/tedunderwood'&#62;tedunderwood&#60;/a&#62;'s &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1768&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Excellent; thanks very much.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Andrew Goldstone on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1771</link>
			<pubDate>Mon, 29 Oct 2012 09:25:53 +0000</pubDate>
			<dc:creator>Andrew Goldstone</dc:creator>
			<guid isPermaLink="false">1771@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;&#60;em&#62;Replying to @&#60;a href='http://digitalhumanities.org/answers/profile/cforster'&#62;cforster&#60;/a&#62;'s &#60;a href=&#34;http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1767&#34;&#62;post&#60;/a&#62;:&#60;/em&#62;&#60;/p&#62;
&#60;p&#62;Glad you're trying out DFR too. Lots of treasures buried in there, I feel sure.&#60;/p&#62;
&#60;p&#62;As Ted says, when I applied mallet to the data from jstor, I just reconstituted a bag of words from each word-count file in csv format, basically with this perl:&#60;/p&#62;


&#60;div class=&#34;bb_syntax&#34;&#62;&#60;table&#62;&#60;tr&#62;&#60;td class=&#34;line_numbers&#34;&#62;&#60;pre&#62;1
2
3
4
5
6
7
8
9
&#60;/pre&#62;&#60;/td&#62;&#60;td class=&#34;code&#34;&#62;&#60;pre class=&#34;perl&#34; style=&#34;font-family:monospace;&#34;&#62;&#60;span style=&#34;color: #b1b100;&#34;&#62;my&#60;/span&#62; &#60;span style=&#34;color: #0000ff;&#34;&#62;$header&#60;/span&#62; &#60;span style=&#34;color: #339933;&#34;&#62;=&#60;/span&#62; &#60;span style=&#34;color: #009999;&#34;&#62;&#38;lt;INFILE&#38;gt;&#60;/span&#62;&#60;span style=&#34;color: #339933;&#34;&#62;;&#60;/span&#62;
&#60;span style=&#34;color: #000066;&#34;&#62;die&#60;/span&#62; &#60;span style=&#34;color: #b1b100;&#34;&#62;unless&#60;/span&#62; &#60;span style=&#34;color: #0000ff;&#34;&#62;$header&#60;/span&#62; &#60;span style=&#34;color: #339933;&#34;&#62;=~&#60;/span&#62; &#60;span style=&#34;color: #009966; font-style: italic;&#34;&#62;/^WORDCOUNTS,WEIGHT/&#60;/span&#62;&#60;span style=&#34;color: #339933;&#34;&#62;;&#60;/span&#62;
&#38;nbsp;
&#60;span style=&#34;color: #b1b100;&#34;&#62;while&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#40;&#60;/span&#62;&#60;span style=&#34;color: #009999;&#34;&#62;&#38;lt;INFILE&#38;gt;&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#41;&#60;/span&#62; &#60;span style=&#34;color: #009900;&#34;&#62;&#38;#123;&#60;/span&#62;
    &#60;span style=&#34;color: #b1b100;&#34;&#62;my&#60;/span&#62; &#60;span style=&#34;color: #009900;&#34;&#62;&#38;#40;&#60;/span&#62;&#60;span style=&#34;color: #0000ff;&#34;&#62;$word&#60;/span&#62;&#60;span style=&#34;color: #339933;&#34;&#62;,&#60;/span&#62;&#60;span style=&#34;color: #0000ff;&#34;&#62;$count&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#41;&#60;/span&#62; &#60;span style=&#34;color: #339933;&#34;&#62;=&#60;/span&#62; &#60;span style=&#34;color: #000066;&#34;&#62;split&#60;/span&#62; &#60;span style=&#34;color: #ff0000;&#34;&#62;','&#60;/span&#62;&#60;span style=&#34;color: #339933;&#34;&#62;;&#60;/span&#62;
    &#60;span style=&#34;color: #b1b100;&#34;&#62;if&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#40;&#60;/span&#62;&#60;span style=&#34;color: #0000ff;&#34;&#62;$word&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#41;&#60;/span&#62; &#60;span style=&#34;color: #009900;&#34;&#62;&#38;#123;&#60;/span&#62;
        &#60;span style=&#34;color: #000066;&#34;&#62;print&#60;/span&#62; OUTFILE &#60;span style=&#34;color: #ff0000;&#34;&#62;&#38;quot;$word &#38;quot;&#60;/span&#62; &#60;span style=&#34;color: #b1b100;&#34;&#62;for&#60;/span&#62; &#60;span style=&#34;color: #009900;&#34;&#62;&#38;#40;&#60;/span&#62;1&#60;span style=&#34;color: #339933;&#34;&#62;..&#60;/span&#62;&#60;span style=&#34;color: #0000ff;&#34;&#62;$count&#60;/span&#62;&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#41;&#60;/span&#62;&#60;span style=&#34;color: #339933;&#34;&#62;;&#60;/span&#62;
    &#60;span style=&#34;color: #009900;&#34;&#62;&#38;#125;&#60;/span&#62;
&#60;span style=&#34;color: #009900;&#34;&#62;&#38;#125;&#60;/span&#62;&#60;/pre&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/div&#62;



&#60;p&#62;and then passed the resulting files to mallet import-dir. It was quite cheap in time and space for the set of about 10^4 articles we were working on.&#60;/p&#62;
&#60;p&#62;I don't think the mallet command-line tool can take a file of word counts. The MALLET java library must operate on word counts in the end, and I think if you interface with MALLET through java you can feed it the counts directly: cf. &#60;a href=&#34;http://mallet.cs.umass.edu/import-devel.php&#34;&#62;MALLET: Data Import for Java Developers&#60;/a&#62;. I went with the fast-and-dumb method because my java is too weak to figure this out in short order and I wanted instant gratification.&#60;/p&#62;
&#60;p&#62;If your data looks funky, write the dfr support e-mail address; they were quite helpful to Ted and me. As Ted says it's a beta, but you are supposed to get wordcounts for the full articles. Remember that lots of jstor items are not articles but reviews, front and back matter, etc. You can filter by item type &#34;fla&#34; (full-length article) to get only articles (put &#60;code&#62;ty:fla&#60;/code&#62; in your search field).&#60;/p&#62;
&#60;p&#62;&#60;strong&#62;edit:&#60;/strong&#62; Or possibly you could convert the csv wordcounts to &#34;SVMLight-style&#34; feature:value pairs? Didn't try this, but see the bottom of: &#60;a href=&#34;http://mallet.cs.umass.edu/import.php&#34;&#62;http://mallet.cs.umass.edu/import.php&#60;/a&#62;.&#60;/p&#62;
&#60;p&#62;&#60;strong&#62;edit:&#60;/strong&#62; One last note; see below.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>tedunderwood on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1768</link>
			<pubDate>Sun, 28 Oct 2012 22:05:49 +0000</pubDate>
			<dc:creator>tedunderwood</dc:creator>
			<guid isPermaLink="false">1768@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Hey, Andrew Goldstone and I topic modeled data from DfR. Andrew used MALLET, and I believe he did it the way you describe: reconstituted &#34;text&#34; from the word counts. Perhaps you could ping him for his script.&#60;/p&#62;
&#60;p&#62;I use my own Java script for topic modeling, and it works directly with word counts, so I didn't have to do that. But I haven't packaged my script for distribution, and MALLET is faster, anyway, so you'd want to use it -- even with the weird input quirk you mention.&#60;/p&#62;
&#60;p&#62;My experience suggests that they're full word counts for the whole article. Anyway, for PMLA they were. But we were missing some metadata, as I recall, and had to reorder it. DfR is still semi kinda in beta mode.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>cforster on "Topic Modeling (MALLET) with JSTOR Data For Research"</title>
						<link>http://digitalhumanities.org/answers/topic/topic-modeling-mallet-with-jstor-data-for-research#post-1767</link>
			<pubDate>Sun, 28 Oct 2012 21:56:19 +0000</pubDate>
			<dc:creator>cforster</dc:creator>
			<guid isPermaLink="false">1767@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Does anyone have any experience using topic modeling to analyze data from JSTOR's &#60;a href=&#34;http://dfr.jstor.org/&#34;&#62;&#34;Data for Research&#34;&#60;/a&#62;? &#60;/p&#62;
&#60;p&#62;DFR lets you request datasets based on queries of the JSTOR database. Full-text of the JSTOR material, however, is not available. Instead one can request keywords, various ngrams (bi, tri, or quad), or word counts; requesting the word counts, one gets a set of files: one file per article with the word counts (CSV or XML), and a manifest (connecting filenames to complete[ish] citations). (Minor note: Looking at the raw counts, it seems like these may be samples of the articles, not the full word counts for the whole article, though I'm not totally sure; anyone have any experience with DFR?) &#60;/p&#62;
&#60;p&#62;My question: is there a way to get MALLET to take word counts as input rather than raw text? Since topic modeling treats texts/documents as bags of words, it should be able to work with the frequency counts as effectively as with raw text, right? I could write a script to reassemble texts in the proportions described by the word frequencies, but that seems so utterly absurd that I suspect (hope) I may be missing something.&#60;/p&#62;
&#60;p&#62;Anyone have any experience here?
&#60;/p&#62;</description>
		</item>

	</channel>
</rss>
