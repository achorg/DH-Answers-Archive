<?
/*
Plugin Name: bb Topic Icons
Plugin URI: http://devt.caffeinatedbliss.com/bbpress/topic-icons
Description: Adds configurable icons next to topics based on their status
Author: Paul Hawke
Author URI: http://paul.caffeinatedbliss.com/
Version: 0.6
*/

/****************************************************************************
 *
 * Configure the following constants to fine-tune the CSS classes that are
 * generated, the icon filenames that are used, and the text used in the
 * legend (if you have one displayed).  Note: filenames are likely to be
 * taken away in a future version and replaced with the concept of "icon sets"
 * whose filenames are fixed, so dont get used to editing the filenames,
 * as this will break in future versions.
 *
 ****************************************************************************/

// css class for the unsorted list used in the legend display
define( LEGEND_CLASS, 'topic_icon_legend' );

// busy threshold - a topic with more posts than this is counted as "busy"
// for purposes of picking an icon.
define( BUSY_THRESHOLD, 15 );

// width of the images, in pixels
define( ICON_WIDTH, '20' );

// height of the images, in pixels
define( ICON_HEIGHT, '20' );

// the URL base for where to find the default icon set.
define( ICON_SET_URL_BASE, BB_PLUGIN_URL.'bb-topic-icons/icon-sets/' );

/****************************************************************************
 *
 * Shouldnt be much need to edit anything beyond this point - configuration
 * is all done via the constants (above) and through and admin area page in
 * bbPress at runtime.
 *
 ****************************************************************************/

require( 'bb-topic-icons-api.php' );
require( 'bb-topic-icons-admin.php' );
require( 'interface.status-interpreter.php' );
require( 'interface.status-renderer.php' );
require( 'class.default-status-interpreter.php' );
require( 'class.default-status-renderer.php' );

function topic_icons_legend() {
	$icon_set_name = topic_icons_get_active_icon_set();
	$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;
	$statuses = get_active_status_interpreter()->getAllStatuses();
	$renderer = get_active_status_renderer();
	
	echo '<ul id="'.LEGEND_CLASS.'">';
	for ($i=0; $i < count($statuses); $i++) {
		$image = $renderer->renderStatus($statuses[$i]);
		$tooltip = $renderer->renderStatusTooltip($statuses[$i]);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (isset($image) && strlen($image) > 0 &&
			isset($tooltip) && strlen($tooltip) > 0 && $exists) {
			echo '<li><img src="'.$icon_set_url.'/'.$image.
				'" width="'.ICON_WIDTH.'" height="'.ICON_HEIGHT.
				'" align="absmiddle">&nbsp;'.$tooltip.'</li>';
		}
	}
	echo '</ul>';
}

function topic_icons_css() {
	echo "\n<style type=\"text/css\"><!--\n";
	require( 'bb-topic-icons.css' );
	echo "\n--></style>";
}

function topic_icons_label( $label ) {
	global $topic;
	
	if (bb_is_front() || bb_is_forum() || bb_is_view() || bb_is_tag()) {		
		$icon_set_name = topic_icons_get_active_icon_set();
		$icon_set_url = ICON_SET_URL_BASE . $icon_set_name;

		$status = get_active_status_interpreter()->getStatus(bb_get_location(), $topic);
		$renderer = get_active_status_renderer();
		$image = $renderer->renderStatus($status);
		$tooltip = $renderer->renderStatusTooltip($status);
		$exists = file_exists(dirname(__FILE__).'/icon-sets/'.$icon_set_name.'/'.$image);

		if (!$exists) {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), ICON_SET_URL_BASE.'/empty.png', ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		} else if (strlen($tooltip) > 0) {		
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"><span>%s</span></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $tooltip, $label);
		} else {
			return sprintf(__('<div class="topic-icon-image"><a href="%s"><img src="%s" width="%s" height="%s" alt="%s" border="0"></a></div> %s'), 
				get_topic_link($topic->topic_id), $icon_set_url.'/'.$image, ICON_WIDTH, ICON_HEIGHT, $tooltip, $label);
		}
	}
	
	return $label;
}

function topic_icons_init( ) {
	remove_filter('bb_topic_labels', 'bb_closed_label', 10);
	remove_filter('bb_topic_labels', 'bb_sticky_label', 20);

	add_filter('bb_topic_labels', 'topic_icons_label', 11);

	add_action('bb_head', 'topic_icons_css');

	add_action('bb_admin_menu_generator', 'topic_icons_admin_page_add');
	add_action('bb_admin-header.php', 'topic_icons_admin_page_process');
	
	topic_icons_register_status_interpreter('default', new DefaultStatusInterpreter(BUSY_THRESHOLD));
	topic_icons_register_status_renderer('default', new DefaultStatusRenderer());
}

topic_icons_init();

?>
<?xml version="1.0" encoding="UTF-8"?>
<!-- generator="bbPress/1.0.2" -->
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Digital Humanities Questions &#38; Answers &#187; Forum: About DHAnswers - Recent Topics</title>
		<link>http://digitalhumanities.org/answers/forum/about-dhanswers</link>
		<description>Digital Humanities Questions &amp; Answers &#187; Forum: About DHAnswers - Recent Topics</description>
		<language>en-US</language>
		<pubDate>Sun, 24 Mar 2019 17:09:02 +0000</pubDate>
		<generator>http://bbpress.org/?v=1.0.2</generator>
		<textInput>
			<title><![CDATA[Search]]></title>
			<description><![CDATA[Search all topics from these forums.]]></description>
			<name>q</name>
			<link>http://digitalhumanities.org/answers/search.php</link>
		</textInput>
		<atom:link href="http://digitalhumanities.org/answers/rss/forum/about-dhanswers/topics" rel="self" type="application/rss+xml" />

		<item>
			 
				<title>aelang on "Good 3D scanners to use alongside a 3D printer?"</title>
						<link>http://digitalhumanities.org/answers/topic/best-3d-scanner#post-2397</link>
			<pubDate>Thu, 16 Jun 2016 16:22:56 +0000</pubDate>
			<dc:creator>aelang</dc:creator>
			<guid isPermaLink="false">2397@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I have the chance to get a 3D scanner alongside a 3D printer for a DH-lab-to-be, and although there's lots of useful posts here about 3D printers, there doesn't seem to be much about 3D scanners. If anyone has any recommendations or tips, I'd be glad to hear them. It's not going to be state-of-the-art stuff (yet), but there's a lot of scope for interesting work with colleagues at my institution working on digital cultural heritage so I'd like to get something that will at least provide the opportunity for people to pilot ideas or create a proof of concept.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>kwsherwood on "Tech Foundation for a DH Center Lab"</title>
						<link>http://digitalhumanities.org/answers/topic/tech-foundation-for-a-dh-center-lab#post-2279</link>
			<pubDate>Wed, 11 Feb 2015 02:33:08 +0000</pubDate>
			<dc:creator>kwsherwood</dc:creator>
			<guid isPermaLink="false">2279@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Looking at the opportunity to write a quick proposal for equipment to be used in a new DH lab (space for 6, max 10 workstations) and thinking about generic needs of future colleagues and graduate student researchers.  The quandry -- we lack information about specific project needs which might emerge.  Any recommendations on the foundation or baseline for such a lab?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>raischmj on "OK, I just joined and saw the highlighted question about what this q and a is"</title>
						<link>http://digitalhumanities.org/answers/topic/ok-i-just-joined-and-saw-the-highlighted-question-about-what-this-q-and-a-is#post-2110</link>
			<pubDate>Sat, 19 Oct 2013 11:30:20 +0000</pubDate>
			<dc:creator>raischmj</dc:creator>
			<guid isPermaLink="false">2110@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;...that is, what it is for. Not to ask about schools, but sorry, I am a librarian seeking to transition to working with digital humanities. Could I please just ask what training I really need for this? writing code only? Are there off the shelf systems for digital projects that require less technical training? if I could get some answers to these queries, I promise I won't bother you with FINDING the training. I need a better handle on what to look for myself. thanks.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>bhmarsha on "Are any libraries using Neatline?"</title>
						<link>http://digitalhumanities.org/answers/topic/are-any-libraries-using-neatline#post-2102</link>
			<pubDate>Sun, 29 Sep 2013 22:55:42 +0000</pubDate>
			<dc:creator>bhmarsha</dc:creator>
			<guid isPermaLink="false">2102@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Hi everyone!&#60;/p&#62;
&#60;p&#62;My name is Brianna Marshall and I'm a graduate student working as a digital projects research assistant at the Indiana University Libraries. Over the summer, we began exploring Neatline as a platform to facilitate faculty DH projects. We've been in touch with the library at the University of North Carolina at Chapel Hill, but beyond that we haven't heard much about other libraries using the tool. We've faced a significant number of roadblocks so far in working with Neatline so we definitely think it would be useful to get other libraries' perspectives. &#60;/p&#62;
&#60;p&#62;If anyone knows of libraries using Neatline, please let me know! We'll appreciate it. &#60;/p&#62;
&#60;p&#62;Thanks!&#60;br /&#62;
Brianna
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Josh on "What other types of questions can we be asking here?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-other-types-of-questions-can-we-be-asking-here#post-2024</link>
			<pubDate>Tue, 11 Jun 2013 21:03:05 +0000</pubDate>
			<dc:creator>Josh</dc:creator>
			<guid isPermaLink="false">2024@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I would like to interrupt our regularly scheduled questioning here at DH Answers and get a little meta. DH Answers is a fantastic resource, but it tends to be very tool and tech centric, and I wonder it isn't time to find ways of facilitating other types of non-totally-unrelated discussion here. &#60;/p&#62;
&#60;p&#62;Recently, some really great discussions have been happening on Twitter and sites like &#60;a href=&#34;http://dhpoco.org/&#34;&#62;DH Poco&#60;/a&#62; that have arisen in response to more social, political, and cultural questions, events, prompts, and provocations in relation to DH. I feel that some of these questions—of gender, labor, disciplinarity, and others—might be even more illuminating when embedded within other, more dominant, discourses, like those around available tools, technologies, and methodologies. &#60;/p&#62;
&#60;p&#62;I also think that, due to issues of scope and scale on Twitter and the epic-scrolling and searching that needs to happen to stay up-to-date on the latest of 150+ blog post comments, we might need to seek out a better mechanism for supporting these important discussions. I don't mean to say these discussions shouldn't be happening anywhere and everywhere—of course they should!—but I also think that the way DH Answers was originally set up makes folks less likely to bring these types of discussion here. (Or maybe it's something else entirely? Discuss!)&#60;/p&#62;
&#60;p&#62;For instance, a quick look at the categories one has to choose from when posting a question (this one is filed under &#34;About DHAnswers&#34; which may or may not makes sense) reveals how much we are privileging technical questions about tools and technologies, and while there's certainly nothing wrong with that (the tools and tech, not so much the privileging) it unfortunately, I'd argue, suggestively narrows the conversation considerably. &#60;/p&#62;
&#60;p&#62;&#34;1 Year Ago&#34; Matthew Kirschenbaum asked the DH Answers community, &#60;a href=&#34;http://digitalhumanities.org/answers/topic/should-dhers-accept-militarydefense-funding#post-1239&#34;&#62;&#34;Should DHers accept military/defense funding?&#34;&#60;/a&#62; which he tagged with, among other things, &#34;ethics&#34; (not a single &#34;Popular Tag&#34; explicitly deals with any of these &#34;other&#34; issues). It was also filed under the category &#34;Project Management &#38;amp; DH Profession,&#34; which seems to be the catch-all for questions that don't fit strict the limitations of the tech-centric discourse. I think the question Matthew raises, due to everything from recent events (see: PRISM) to the history of humanists working in military research, makes this a very pertinent and important question worth exploring, especially in this particular digital space. And while before and after that post there have been several of a more political or ethical nature, there have not been many, and that seems, at the very least, worthy of concern and some discussion.&#60;/p&#62;
&#60;p&#62;So, LONG STORY SHORT, I'd like to see what others think about this by asking the following questions (along with all of those implicitly and explicitly raised above): (1) Can and should DH Answers be a place for social, cultural, political, etc. discussion (as it seems it at times has been)? (2) What types of categories can we add that would make folks more comfortable feeling such questions are welcome? (3) How can we continue to further integrate discussions happening in other venues—Twitter, DH Poco, personal blogs, MLA Commons, etc.—with DH Answers?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Annelie Rugg on "Standardized/recommended terms to categorize digital humanities projects?"</title>
						<link>http://digitalhumanities.org/answers/topic/standardizedrecommended-terms-to-categorize-digital-humanities-projects#post-1765</link>
			<pubDate>Thu, 25 Oct 2012 20:49:40 +0000</pubDate>
			<dc:creator>Annelie Rugg</dc:creator>
			<guid isPermaLink="false">1765@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I am looking for a standardized list of terms to help us categorize digital humanities projects? What are the terms that we would use to constitute the field/discipline of digital humanities?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>zacharysdavis on "Who are notable individuals or organizations involved in DH in the Boston area?"</title>
						<link>http://digitalhumanities.org/answers/topic/who-are-notable-individuals-or-organizations-involved-in-dh-in-the-boston-area#post-1531</link>
			<pubDate>Thu, 23 Feb 2012 23:22:10 +0000</pubDate>
			<dc:creator>zacharysdavis</dc:creator>
			<guid isPermaLink="false">1531@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I'm starting a digital humanities group in Boston and want to make sure I am aware of any individuals or organizations that may be interested in joining.&#60;br /&#62;
&#60;a href=&#34;http://www.meetup.com/bostondigitalhumanities/&#34; rel=&#34;nofollow&#34;&#62;http://www.meetup.com/bostondigitalhumanities/&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>JosephRyan on "Join the dh_developers list?"</title>
						<link>http://digitalhumanities.org/answers/topic/join-the-dh_developers-list#post-1340</link>
			<pubDate>Fri, 12 Aug 2011 17:55:18 +0000</pubDate>
			<dc:creator>JosephRyan</dc:creator>
			<guid isPermaLink="false">1340@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Do you work in digital humanities in a role focused significantly&#60;br /&#62;
on software, infrastructure, tool deployment and/or development? Do you create new representations of humanities research? Are you interested in meeting your colleagues and sharing information about how they work within their organizations, favorite tools, interesting data sources, and neighboring concerns?&#60;/p&#62;
&#60;p&#62;If so, you are invited to join the brand new dh_developers&#60;br /&#62;
list. Sign up and introduce yourself today:&#60;br /&#62;
&#60;a href=&#34;http://lists.unc.edu/read/all_forums/subscribe?name=dh_developers&#34; rel=&#34;nofollow&#34;&#62;http://lists.unc.edu/read/all_forums/subscribe?name=dh_developers&#60;/a&#62;
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Bethany Nowviskie on "How can we improve the DHanswers site?"</title>
						<link>http://digitalhumanities.org/answers/topic/how-can-we-improve-the-dhanswers-site#post-192</link>
			<pubDate>Wed, 29 Sep 2010 13:06:15 +0000</pubDate>
			<dc:creator>Bethany Nowviskie</dc:creator>
			<guid isPermaLink="false">192@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Now that we've launched (and a big thanks to our collaborators and to all of the people who volunteered to beta test and pre-populate the site!), we're keen to hear your ideas for improving DHanswers.  We have some plans for further Twitter integration and email notifications at the category level, but need to hear your good ideas.&#60;/p&#62;
&#60;p&#62;So here's an open thread. What can we do to make DHanswers as useful and joyful a community-based tool as possible?
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>James Neal on "Where might I find resources and literature regarding diversity and DH?"</title>
						<link>http://digitalhumanities.org/answers/topic/where-might-i-find-resources-and-literature-regarding-diversity-and-dh#post-1198</link>
			<pubDate>Wed, 08 Jun 2011 10:34:16 +0000</pubDate>
			<dc:creator>James Neal</dc:creator>
			<guid isPermaLink="false">1198@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Coming out of the THATCamp CHNM 2011 diversity, inclusion, and accessibility session, I hope to survey existing resources and literature on these issues in DH. Any help? A search for the keyword &#34;diversity&#34; here on DH Q&#38;amp;A doesn't provide many results - &#60;a href=&#34;http://digitalhumanities.org/answers/search.php?q=diversity&#34; rel=&#34;nofollow&#34;&#62;http://digitalhumanities.org/answers/search.php?q=diversity&#60;/a&#62; ...
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Sandeep Sharma on "What type of projects can be done in Digital Humanities?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-type-of-projects-can-be-done-in-digital-humanities#post-897</link>
			<pubDate>Fri, 21 Jan 2011 14:27:13 +0000</pubDate>
			<dc:creator>Sandeep Sharma</dc:creator>
			<guid isPermaLink="false">897@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Can you please provide me some idea about the types of projects can be done in Digital Humanities???
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Bethany Nowviskie on "How can I find answers, get my questions answered, &#38; help DHanswers grow?"</title>
						<link>http://digitalhumanities.org/answers/topic/how-can-i-find-info-thats-already-been-discussed-help-dhanswers-grow#post-492</link>
			<pubDate>Mon, 18 Oct 2010 19:35:21 +0000</pubDate>
			<dc:creator>Bethany Nowviskie</dc:creator>
			<guid isPermaLink="false">492@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Gee, I'm wondering if one of our intrepid &#60;a href=&#34;http://twitter.com/DHanswers&#34;&#62;@DHanswers&#60;/a&#62; admins can enlighten us all on good ways to find information on this site.  How can we all best use &#60;em&#62;and contribute to good management of&#60;/em&#62; the knowledge in this growing, community-built knowledge-base?&#60;/p&#62;
&#60;p&#62;If only someone doing, say, a post-doc in Information Management could offer some advice...
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Stéfan Sinclair on "how do I change my user thumbnail for dhanswers?"</title>
						<link>http://digitalhumanities.org/answers/topic/how-do-i-change-my-user-thumbnail-for-dhanswers#post-51</link>
			<pubDate>Mon, 06 Sep 2010 15:20:59 +0000</pubDate>
			<dc:creator>Stéfan Sinclair</dc:creator>
			<guid isPermaLink="false">51@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;I must be missing something obvious, but when I go to the editing page for my profile, I can't seem to find a mechanism for changing my thumbnail picture.
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Jennifer Vinopal on "How can I change my DHanswers profile picture?"</title>
						<link>http://digitalhumanities.org/answers/topic/how-can-i-change-my-dhanswers-profile-picture#post-388</link>
			<pubDate>Fri, 08 Oct 2010 12:08:36 +0000</pubDate>
			<dc:creator>Jennifer Vinopal</dc:creator>
			<guid isPermaLink="false">388@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;In my &#34;edit profile&#34; settings I can't see how to edit my profile picture. TIA!
&#60;/p&#62;</description>
		</item>
		<item>
			 
				<title>Nicholas Pavkovic on "What is Digital Humanities?"</title>
						<link>http://digitalhumanities.org/answers/topic/what-is-digital-humanities#post-289</link>
			<pubDate>Fri, 01 Oct 2010 03:06:23 +0000</pubDate>
			<dc:creator>Nicholas Pavkovic</dc:creator>
			<guid isPermaLink="false">289@http://digitalhumanities.org/answers/</guid>
			<description>&#60;p&#62;Sorry to be so green, and I apologize if this issue has already been addressed somewhere the forums. If a definition is elusive, a list of example projects would be helpful.&#60;/p&#62;
&#60;p&#62;Thanks!
&#60;/p&#62;</description>
		</item>

	</channel>
</rss>
