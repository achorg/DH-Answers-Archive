<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<title>How to Handle Soft Hyphens in OCR&#039;d PDF? &laquo; Digital Humanities Questions &amp; Answers</title>
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/style.css" type="text/css" />
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/screen.css" type="text/css" media="screen" title="blueprint-print" charset="utf-8"/>
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/print.css" type="text/css" media="print" title="blueprint-print" charset="utf-8"/>
	<!--[if lt IE 8]>
	  <link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/ie.css" type="text/css" media="screen, projection">
	<![endif]-->
	<!--[if IE]>
		<style type="text/css" media="screen">
			.header-button, form.login input, input[type="submit"], #header div.search, form.login input {
				border-radius:4px;
				behavior: url(border-radius.htc);
			}
		</style>
	<![endif]-->
	<!--[if IE 7]>
		<style type="text/css" media="screen">
			#header .search .search-form input.submit {
				padding: 0;
				margin: 0;
				height: 29px;
				width: 70px;
			}
		</style>
	<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Digital Humanities Questions &amp; Answers &raquo; Topic: How to Handle Soft Hyphens in OCR&#039;d PDF?" href="/DH-Answers-Archive/rss/topic/how-to-handle-soft-hyphens-in-ocrd-pdf" />
<meta name="generator" content="bbPress 1.0.2" />

<link rel="stylesheet" href="/DH-Answers-Archive/my-plugins/bb-syntax/bb-syntax.css" type="text/css" media="screen" />

<style type="text/css"><!--
.topic-icon-image {
	width: 20px;
	height: 20px;
	margin-right: 6px;
	position: relative;
	float: left;
}

.topic-icon-image a span {
	display: none;
}

.topic-icon-image a:hover {
	position: relative;
}

.topic-icon-image a:hover span {
	display: block;
   	position: absolute;
	top: 0px; 
	left: 10px;
   	padding: 5px; 
   	margin: 10px; 
   	z-index: 100;
   	background: #ffc; 
   	border: 1px dotted #333;
	opacity: 0.8;
	color: #000;
}
--></style><style type="text/css">
	.best_answer {text-decoration:none; border:0; white-space:nowrap; display:block; margin:1em 0;		
		border:0; text-decoration:none; width:20px; height:16px;
		background: url(http://digitalhumanities.org/answers/my-plugins/best-answer/best-answer.png) no-repeat scroll 0px 1px transparent;} 
	span.best_answer {margin: 0px; float: left;}
	#thread .threadauthor .best_answer {padding-left: 20px;}
	a.best_answer, a.best_answer:link {color:#999;}
	a.best_answer:hover {color:green;}	
	a.best_answer_selected {color: green;}
	a.best_answer_selected:hover {color:red;}		
	#thread li.best_answer_background { background-color: transparent; }
	#thread li.best_answer_background .threadpost { background-color: #afa; }
	#thread li.alt.best_answer_background .threadpost { background-color: #afa; }
	.best_answer_meta { background: url(http://digitalhumanities.org/answers/my-plugins/best-answer/best-answer.png) no-repeat scroll 5px 40% transparent; padding-left: 26px; }
</style>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<link rel='stylesheet' id='social-it-css'  href='http://digitalhumanities.org/answers/my-plugins/social-it/css/style.css?ver=1.5' type='text/css' media='all' />
<script type='text/javascript' src='http://digitalhumanities.org/answers/bb-includes/js/jquery/jquery.js?ver=1.2.6'></script>
<script type='text/javascript' src='http://digitalhumanities.org/answers/my-plugins/social-it/js/social-it-public.js?ver=1.5'></script>
<!-- End Of Code Generated By Social It Plugin By www.gaut.am -->


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18811436-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body id="topic-page">
	<div class="container prepend-top append-bottom">
		<div id="util-login">
		<a href="/DH-Answers-Archive/bb-login.php">Log in</a> | <a href="/DH-Answers-Archive/register.php">Register</a>		</div>
		<div id="header" class="prepend-6 span-18">
			<a id="ach-logo" href="http://www.ach.org">ACH</a>
			<h1><a href="/DH-Answers-Archive/">Digital Humanities Questions &amp; Answers</a></h1>
						<div class="login-container span-12">
				<form class="login" method="post" action="/DH-Answers-Archive/bb-login.php">
		<div class="header-button ask-link"><a href="/DH-Answers-Archive/bb-login.php">Ask a Question</a></div></form>			</div>

			<div class="search span-6 last">
<form class="search-form" role="search" action="/DH-Answers-Archive/search.php" method="get">
	<p>
		<label class="hidden" for="q">Search:</label>
		<input type="text" size="10" maxlength="100" name="q" id="q" />
		<input class="submit" type="submit" value="Search &raquo;" />
	</p>
</form>
			</div>
		</div>
		<div id="main" class="span-24">

<div class="bbcrumb"><a href="/DH-Answers-Archive/">Digital Humanities Questions &amp; Answers</a> &raquo; <a href="/DH-Answers-Archive/forum/applications-tools-formats">Applications, Tools, Formats</a></div>
<div class="infobox" role="main">

<div id="topic-info">
<span id="topic_labels"></span>
<h2 class="topictitle">How to Handle Soft Hyphens in OCR&#039;d PDF?</h2>
<span id="topic_posts">(6 posts)</span>
<span id="topic_voices">(5 voices)</span>

<ul class="topicmeta">
	<li>Asked 6 years ago by cforster</li>
	<li><a href="/DH-Answers-Archive/topic/how-to-handle-soft-hyphens-in-ocrd-pdf#post-1673">Latest answer</a> from Ge0ffrey</li>
</ul>
</div>

<div id="topic-tags">
<p>Tags:</p>


<ul id="tags-list" class="tags-list list:tag">
	<li id="tag-63_26"><a href="/DH-Answers-Archive/tags/ocr" rel="tag">ocr</a> </li>
	<li id="tag-64_4" class="alt"><a href="/DH-Answers-Archive/tags/scanning" rel="tag">scanning</a> </li>
	<li id="tag-62_26"><a href="/DH-Answers-Archive/tags/text" rel="tag">text</a> </li>
</ul>


</div>

<div style="clear:both;"></div>
</div>
<div id="ajax-response"></div>
<ol id="thread" class="list:post">

	<li id="post-180">
		<div id="position-1">
			<div class="threadauthor">
				<a href="http://www.cforster.com"><img alt="" src="http://www.gravatar.com/avatar/bc21b70aca81e2f7a1c8422dc6c44a16?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://www.cforster.com">cforster</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/cforster">Member</a></small>
				</p>
				<div class="author-badges"><span title='20+ Posts' class='badge silver-poster 25'><!-- 20-49 posts --></span><span title='3+ Best Answers' class='badge bronze-answerer 3'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I am using ABBYY Finereader 10.0 to OCR some material I've scanned. I would like to export the result as a PDF with the text "under" the image. Everything seems to be going well, <em>except</em> the way that soft-hyphens (Finereader calls them "optional hyphens") are handled in the PDF output. </p>
<p>While the OCR successfully recognizes most end-of-line hyphens as soft hyphens, when the result is exported to PDF, the word remains split in half and therefore will not appear in search results. For example, if the word "digital" appeared at the end of a line, hyphenated as "digi-tal," Finereader recognizes the hyphen as a soft hyphen. But if I export to PDF and search for the term "digital" it will not be found (but "digi-" and "tal" would).</p>
<p>Any thoughts on how to handle this? I could just manually rejoin these words, but that seems absurd. After futzing about for quite awhile, though, I've been unable to find a better solution.
</p>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<div class="social-it" style=""><ul class="socials"><li class="socialit-twitter"><a href="http://twitter.com/home?status=How+to+Handle+Soft+Hyphens+in+OCR%26%23039%3Bd+PDF%3F+-+http://bit.ly/dogjIA+(via+@DHAnswers)" rel="nofollow" class="external" title="Tweet this question">Tweet this question</a></li></ul><div style="clear:both;"></div></div><!-- End Of Code Generated By Social It Plugin By www.gaut.am -->

</div>
				<div class="poststuff">Posted 6 years ago <a class="post-perma-link" href="#post-180">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-181" class="alt">
		<div id="position-2">
			<div class="threadauthor">
				<a href="http://www.liquidfoot.com"><img alt="" src="http://www.gravatar.com/avatar/f8ea43bbfc6fe9de8794458d17999b8f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://www.liquidfoot.com">Wayne Graham</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/wsgrah">Member</a></small>
				</p>
				<div class="author-badges"><span title='20+ Posts' class='badge silver-poster 48'><!-- 20-49 posts --></span><span title='10+ Best Answers' class='badge silver-answerer 14'><!--10-24 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Do you really need to put the words together? I think this is a case where you may need to rely on something like a search engine in order to get "expected" results. Something like Solr <em>should</em> help with these kinds of issues. Essentially, using its stemmers, words like digital drop the "tal" suffix in the index anyway, so you would get a match in a result as expected. Using the new ExtractingRequestHandler (<a href="http://wiki.apache.org/solr/ExtractingRequestHandler)" rel="nofollow">http://wiki.apache.org/solr/ExtractingRequestHandler)</a>, you can actually add PDFs to an index without patching the core and recompiling the sources. </p>
<p>You could do something along these lines with Ruby to index your PDFs:</p>


<div class="bb_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#008000; font-style:italic;">#! /usr/bin/env ruby</span>
&nbsp;
<span style="color:#CC00FF; font-weight:bold;">Dir</span><span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#996600;">&quot;path/to/pdfs/*.pdf&quot;</span><span style="color:#006600; font-weight:bold;">&#93;</span>.<span style="color:#9900CC;">each</span> <span style="color:#9966CC; font-weight:bold;">do</span> <span style="color:#006600; font-weight:bold;">|</span>file<span style="color:#006600; font-weight:bold;">|</span>
    <span style="color:#008000; font-style:italic;"># Extract the file name out of the file path, excluding extension</span>
    fname = <span style="color:#CC00FF; font-weight:bold;">File</span>.<span style="color:#9900CC;">basename</span><span style="color:#006600; font-weight:bold;">&#40;</span>file, <span style="color:#996600;">'.pdf'</span><span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
    <span style="color:#008000; font-style:italic;"># Don't do it this way in a production environment; intended just to get you going</span>
    <span style="color:#008000; font-style:italic;"># Use rsolr gem if you want to do this on a server</span>
    <span style="color:#006600; font-weight:bold;">&lt;</span>code<span style="color:#006600; font-weight:bold;">&gt;</span>curl <span style="color:#996600;">&quot;http://localhost:8983/solr/update/extract?literal.id=#{fname}&amp;commit=true&quot;</span> <span style="color:#006600; font-weight:bold;">-</span>F <span style="color:#996600;">&quot;myfile=@#{file}&quot;</span><span style="color:#006600; font-weight:bold;">&lt;/</span>code<span style="color:#006600; font-weight:bold;">&gt;</span>
<span style="color:#9966CC; font-weight:bold;">end</span></pre></div></div>



<p>Unless there's some really weird hyphenation, most modern English words will be hyphenated in the same place the stemmers will drop suffixes, so you'll still get a hit on "digital" on "digi" and "tal" (and probably "dig" and "ital". For more information on the stemmers used, see the solr wiki at <a href="http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Stemming" rel="nofollow">http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Stemming</a>.
</p></div>
				<div class="poststuff">Posted 6 years ago <a class="post-perma-link" href="#post-181">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-182">
		<div id="position-3">
			<div class="threadauthor">
				<a href="http://stefansinclair.name/"><img alt="" src="http://www.gravatar.com/avatar/cba4d537795cd02764c6a5c778c21566?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://stefansinclair.name/">Stéfan Sinclair</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/stefansinclair">Admin</a></small>
				</p>
				<div class="author-badges"><span title='50+ Posts' class='badge gold-poster 102'><!-- 50+ posts! --></span><span title='3+ Best Answers' class='badge bronze-answerer 6'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>If searching within the image-over-text PDF is the important thing, it sounds like the PDF software may actually be the problem, rather than the output from Finereader. I'm curious how different PDF readers handle this – could you make available somewhere a hyphenated PDF? (It would be nice to be able to upload here.)
</p></div>
				<div class="poststuff">Posted 6 years ago <a class="post-perma-link" href="#post-182">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-186" class="alt">
		<div id="position-4">
			<div class="threadauthor">
				<a href="http://www.cforster.com"><img alt="" src="http://www.gravatar.com/avatar/bc21b70aca81e2f7a1c8422dc6c44a16?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://www.cforster.com">cforster</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/cforster">Member</a></small>
				</p>
				<div class="author-badges"><span title='20+ Posts' class='badge silver-poster 25'><!-- 20-49 posts --></span><span title='3+ Best Answers' class='badge bronze-answerer 3'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Wayne, what we would like is a searchable PDF; so a single file that would be searchable for keywords (without losing any to hyphenation).</p>
<p>But, in fact, this may all be moot; I went to output a single page from Finereader to share as an example... and it seems to be searching successfully across the soft hyphens. This may be, as Stéfan suggests, a matter of what reader one is using. But, like that odd car noise which disappears when the mechanic arrives, I need to be able to more reliably reproduce this problem before I take anyone's time...</p>
<p>Sorry about that.
</p></div>
				<div class="poststuff">Posted 6 years ago <a class="post-perma-link" href="#post-186">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-536">
		<div id="position-5">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/8ef99e191fc67efdc0ac6f7e6e77909d?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Joe Wicentowski</strong><br />
					<small><a href="/DH-Answers-Archive/profile/joewizgmailcom">Member</a></small>
				</p>
				<div class="author-badges"><span title='5+ Posts' class='badge bronze-poster 7'><!-- 10-19 posts --></span><span class='badge 1'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Sounds like this would be a good question to post to the ABBYY Finereader forums - perhaps they can help you disable the creation of the soft hyphens.  I just noticed this problem myself today when working with a PDF document that I OCRed with ABBYY and saved to MS Word.  Even in Word, I couldn't find &amp; replace the soft hyphens away...
</p></div>
				<div class="poststuff">Posted 6 years ago <a class="post-perma-link" href="#post-536">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1673" class="alt">
		<div id="position-6">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/634db64227987ede15350098b6829566?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Ge0ffrey</strong><br />
					<small><a href="/DH-Answers-Archive/profile/ge0ffrey">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 1'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>There's a solution if you first import it into Word before turning it into a PDF.  First, highlight the soft hyphen and copy it.  Then, Control H (search and replace).  Paste the hyphen in the "Find What" box.  Replace it with a regular hyphen or some other sequence of characters, such as ***.  Then do a search and replace for the regular hyphen or the *** and replace it with nothing!  Et voila.  For some odd reason searching in Word for the ABBYYFine generated hyphen and replacing it with nothing doesn't work.</p>
<p><em>Replying to @Joe Wicentowski's <a href="/DH-Answers-Archive/topic/how-to-handle-soft-hyphens-in-ocrd-pdf#post-536">post</a>:</em>
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1673">Permalink</a> </div>
			</div>
		</div>
	</li>

</ol>
<div class="clearit"><br style=" clear: both;" /></div>
<p class="rss-link"><a href="/DH-Answers-Archive/rss/topic/how-to-handle-soft-hyphens-in-ocrd-pdf" class="rss-link"><abbr title="Really Simple Syndication">RSS</abbr> feed for this topic</a></p>
<h2 class="post-form">Reply</h2>
<p>You must <a href="/DH-Answers-Archive/bb-login.php">log in</a> to post.</p>		</div>
			<div id="footer" role="contentinfo" class="span-24">
				<div id="lang-switch">
					<span class="lang-label">Language</span>
					<form id="bb_language_switcher" style="display:inline-block;"><select  style="width:150px;" name="bb_language_switcher" onchange="location.href='/answers/topic/how-to-handle-soft-hyphens-in-ocrd-pdf?bblang=' + this.options[this.selectedIndex].value;">
<option value=''>Select...</option>	<option value="bg_BG">&nbsp;Bulgarian (BG) </option>
	<option value="continents-cities-sr_RS">&nbsp;Corsican</option>
	<option value="da_DK">&nbsp;Danish (DK) </option>
	<option style='background:#ECE9D8;color:#000;font-weight:bold;' value=" ">&nbsp;English</option>
	<option value="et_EE">&nbsp;Estonian (EE) </option>
	<option value="fr_FR">&nbsp;French (FR) </option>
	<option value="de">&nbsp;German</option>
	<option value="he_IL">&nbsp;Hebrew (IL) </option>
	<option value="hu_HU">&nbsp;Hungarian (HU) </option>
	<option value="id_ID">&nbsp;Indonesian (ID) </option>
	<option value="it_IT">&nbsp;Italian (IT) </option>
	<option value="ja">&nbsp;Japanese</option>
	<option value="pl_PL">&nbsp;Polish (PL) </option>
	<option value="pt_BR">&nbsp;Portuguese (BR) </option>
	<option value="pt_PT">&nbsp;Portuguese (PT) </option>
	<option value="ro_RO">&nbsp;Romanian (RO) </option>
	<option value="ru_RU">&nbsp;Russian (RU) </option>
	<option value="sr_RS">&nbsp;Serbian (RS) </option>
	<option value="sk">&nbsp;Slovak</option>
	<option value="sk_SK">&nbsp;Slovak (SK) </option>
	<option value="es_ES">&nbsp;Spanish (ES) </option>
	<option value="sv_SE">&nbsp;Swedish (SE) </option>
	<option value="th">&nbsp;Thai</option>
	<option value="ug_CN">&nbsp;Uyghur (CN) </option>
	<option value="uz_UZ">&nbsp;Uzbek (UZ) </option>
	<option value="vi">&nbsp;Vietnamese</option>
</select></form>
				</div>			
				<p>A project of the <a href="http://www.ach.org">Association for Computers and the Humanities</a> and the Chronicle of Higher Education's <a href="http://profhacker.com">ProfHacker</a></p>
				<p>Icons by <a href="http://www.famfamfam.com/lab/icons/silk/">famfamfam</a></p>
				<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</p>
				<p><a href="http://lib.virginia.edu/scholarslab"><img src="/DH-Answers-Archive/bb-templates/dhqa/images/slab-logo.jpg" alt="Scholars' Lab" title="Scholars' Lab"/></a></p>
			</div>
	</div>


</body>
</html>
