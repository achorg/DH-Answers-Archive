<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<title>What is the easiest way to automate Omeka backups to a local machine? &laquo; Digital Humanities Questions &amp; Answers</title>
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/style.css" type="text/css" />
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/screen.css" type="text/css" media="screen" title="blueprint-print" charset="utf-8"/>
	<link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/print.css" type="text/css" media="print" title="blueprint-print" charset="utf-8"/>
	<!--[if lt IE 8]>
	  <link rel="stylesheet" href="/DH-Answers-Archive/bb-templates/dhqa/blueprint/ie.css" type="text/css" media="screen, projection">
	<![endif]-->
	<!--[if IE]>
		<style type="text/css" media="screen">
			.header-button, form.login input, input[type="submit"], #header div.search, form.login input {
				border-radius:4px;
				behavior: url(border-radius.htc);
			}
		</style>
	<![endif]-->
	<!--[if IE 7]>
		<style type="text/css" media="screen">
			#header .search .search-form input.submit {
				padding: 0;
				margin: 0;
				height: 29px;
				width: 70px;
			}
		</style>
	<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Digital Humanities Questions &amp; Answers &raquo; Topic: What is the easiest way to automate Omeka backups to a local machine?" href="/DH-Answers-Archive/rss/topic/what-is-the-easiest-way-to-automate-omeka-backups-to-a-local-machine" />
<meta name="generator" content="bbPress 1.0.2" />

<link rel="stylesheet" href="/DH-Answers-Archive/my-plugins/bb-syntax/bb-syntax.css" type="text/css" media="screen" />

<style type="text/css"><!--
.topic-icon-image {
	width: 20px;
	height: 20px;
	margin-right: 6px;
	position: relative;
	float: left;
}

.topic-icon-image a span {
	display: none;
}

.topic-icon-image a:hover {
	position: relative;
}

.topic-icon-image a:hover span {
	display: block;
   	position: absolute;
	top: 0px; 
	left: 10px;
   	padding: 5px; 
   	margin: 10px; 
   	z-index: 100;
   	background: #ffc; 
   	border: 1px dotted #333;
	opacity: 0.8;
	color: #000;
}
--></style><style type="text/css">
	.best_answer {text-decoration:none; border:0; white-space:nowrap; display:block; margin:1em 0;		
		border:0; text-decoration:none; width:20px; height:16px;
		background: url(http://digitalhumanities.org/answers/my-plugins/best-answer/best-answer.png) no-repeat scroll 0px 1px transparent;} 
	span.best_answer {margin: 0px; float: left;}
	#thread .threadauthor .best_answer {padding-left: 20px;}
	a.best_answer, a.best_answer:link {color:#999;}
	a.best_answer:hover {color:green;}	
	a.best_answer_selected {color: green;}
	a.best_answer_selected:hover {color:red;}		
	#thread li.best_answer_background { background-color: transparent; }
	#thread li.best_answer_background .threadpost { background-color: #afa; }
	#thread li.alt.best_answer_background .threadpost { background-color: #afa; }
	.best_answer_meta { background: url(http://digitalhumanities.org/answers/my-plugins/best-answer/best-answer.png) no-repeat scroll 5px 40% transparent; padding-left: 26px; }
</style>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<link rel='stylesheet' id='social-it-css'  href='http://digitalhumanities.org/answers/my-plugins/social-it/css/style.css?ver=1.5' type='text/css' media='all' />
<script type='text/javascript' src='http://digitalhumanities.org/answers/bb-includes/js/jquery/jquery.js?ver=1.2.6'></script>
<script type='text/javascript' src='http://digitalhumanities.org/answers/my-plugins/social-it/js/social-it-public.js?ver=1.5'></script>
<!-- End Of Code Generated By Social It Plugin By www.gaut.am -->


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18811436-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body id="topic-page">
	<div class="container prepend-top append-bottom">
		<div id="util-login">
		<a href="/DH-Answers-Archive/bb-login.php">Log in</a> | <a href="/DH-Answers-Archive/register.php">Register</a>		</div>
		<div id="header" class="prepend-6 span-18">
			<a id="ach-logo" href="http://www.ach.org">ACH</a>
			<h1><a href="/DH-Answers-Archive/">Digital Humanities Questions &amp; Answers</a></h1>
						<div class="login-container span-12">
				<form class="login" method="post" action="/DH-Answers-Archive/bb-login.php">
		<div class="header-button ask-link"><a href="/DH-Answers-Archive/bb-login.php">Ask a Question</a></div></form>			</div>

			<div class="search span-6 last">
<form class="search-form" role="search" action="/DH-Answers-Archive/search.php" method="get">
	<p>
		<label class="hidden" for="q">Search:</label>
		<input type="text" size="10" maxlength="100" name="q" id="q" />
		<input class="submit" type="submit" value="Search &raquo;" />
	</p>
</form>
			</div>
		</div>
		<div id="main" class="span-24">

<div class="bbcrumb"><a href="/DH-Answers-Archive/">Digital Humanities Questions &amp; Answers</a> &raquo; <a href="/DH-Answers-Archive/forum/applications-tools-formats">Applications, Tools, Formats</a></div>
<div class="infobox" role="main">

<div id="topic-info">
<span id="topic_labels"></span>
<h2 class="topictitle">What is the easiest way to automate Omeka backups to a local machine?</h2>
<span id="topic_posts">(7 posts)</span>
<span id="topic_voices">(6 voices)</span>

<ul class="topicmeta">
	<li>Asked 4 years ago by calebmcd@gmail.com</li>
	<li><a href="/DH-Answers-Archive/topic/what-is-the-easiest-way-to-automate-omeka-backups-to-a-local-machine#post-1792">Latest answer</a> from Wayne Graham</li>
</ul>
</div>

<div id="topic-tags">
<p>Tags:</p>


<ul id="tags-list" class="tags-list list:tag">
	<li id="tag-859_1216"><a href="/DH-Answers-Archive/tags/backup" rel="tag">backup</a> </li>
	<li id="tag-858_1216" class="alt"><a href="/DH-Answers-Archive/tags/mysql" rel="tag">mysql</a> </li>
	<li id="tag-434_1215"><a href="/DH-Answers-Archive/tags/omeka" rel="tag">Omeka</a> </li>
	<li id="tag-84_1216" class="alt"><a href="/DH-Answers-Archive/tags/php" rel="tag">php</a> </li>
</ul>


</div>

<div style="clear:both;"></div>
</div>
<div id="ajax-response"></div>
<ol id="thread" class="list:post">

	<li id="post-1776">
		<div id="position-1">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/9afa2c5245174ef5acc171b4f753c670?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>calebmcd@gmail.com</strong><br />
					<small><a href="/DH-Answers-Archive/profile/calebmcdgmailcom">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 2'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I have no experience at all with PHP or MySQL, but I have recently put an Omeka installation on a server I have running on a virtual machine, where I have root privileges. If at all possible, I would like to be able to automatically back up my database to my local Unix-based machine at regular intervals, perhaps using something like Git or scp.</p>
<p>I don't necessarily have to backup all of the Omeka item files, as I have a folder on my local machine that contains all my PDFs and images in the Omeka database, with filenames that are identical to the "Identifier" field in my Omeka items. But I do want to get all of the metadata backed up, even just by grabbing the XML output. But I do want to be able to do this without having to think about it often or log in to Omeka to do the backup. Is there a way to do this?
</p>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<div class="social-it" style=""><ul class="socials"><li class="socialit-twitter"><a href="http://twitter.com/home?status=What+is+the+easiest+way+to+automate+Omeka+backups+to+a+local+machine%3F+-+http://bit.ly/PCyl6z+(via+@DHAnswers)" rel="nofollow" class="external" title="Tweet this question">Tweet this question</a></li></ul><div style="clear:both;"></div></div><!-- End Of Code Generated By Social It Plugin By www.gaut.am -->

</div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1776">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1778" class="alt">
		<div id="position-2">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/0bc599dbc2ee8581648cfe1ef8fdf191?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Willy Lee</strong><br />
					<small><a href="/DH-Answers-Archive/profile/advicepiggmailcom">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 4'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I haven't spent much time in Omeka, but you could write a pretty simple shell script to manage this.</p>
<p>The first thing you should do is use mysqldump to output the database to a SQL export. Then either rsync of git push it to the local machine. After you get these mashed together into a script, add that to the /etc/crontab to schedule it.</p>
<p>That's an off the top of my head strategy, let me know if you want further detail and I'll try to make time to get you something to work with.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1778">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1779">
		<div id="position-3">
			<div class="threadauthor">
				<a href="http://lincolnmullen.com"><img alt="" src="http://www.gravatar.com/avatar/9685441a87546bee3c6fedd703ff0aec?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://lincolnmullen.com">lmullen</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/lmullen">Member</a></small>
				</p>
				<div class="author-badges"><span title='5+ Posts' class='badge bronze-poster 15'><!-- 10-19 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p><em>Replying to @calebmcd@gmail.com's <a href="/DH-Answers-Archive/topic/what-is-the-easiest-way-to-automate-omeka-backups-to-a-local-machine#post-1776">post</a>:</em></p>
<p>Caleb,</p>
<p>You might take a look at <a href="http://theme.fm/2011/06/a-shell-script-for-a-complete-wordpress-backup-4/">this post that describes a shell script</a> for automatically backing up WordPress. Since WordPress and Omeka run on the same stack, the script is probably pretty close to what you need.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1779">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1781" class="alt">
		<div id="position-4">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/9afa2c5245174ef5acc171b4f753c670?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>calebmcd@gmail.com</strong><br />
					<small><a href="/DH-Answers-Archive/profile/calebmcdgmailcom">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 2'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Thanks for the help. The shell script strategy was the way I was going to go, as I had already figured out how to do mysqldump. Not knowing anything about MySQL, I wanted some confirmation that this backup file <em>really would</em> contain everything I would need to restore the whole project. I'll also check out the script Lincoln recommends.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1781">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1782">
		<div id="position-5">
			<div class="threadauthor">
				<a href="http://www.jeanbauer.com"><img alt="" src="http://www.gravatar.com/avatar/fa6bd608fdab7587e118b4a160b83aaa?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://www.jeanbauer.com">jean_bauer</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/jean_bauer">Member</a></small>
				</p>
				<div class="author-badges"><span title='5+ Posts' class='badge bronze-poster 7'><!-- 10-19 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>The script Lincoln linked to looks very good.  </p>
<p>mysqldump is exactly the command you want for this kind of backup.  It will create a file that contains everything you need to completely restore a MySQL database (the database schema and all your data).  For future reference, it is also possible to have mysqldump return just the data or just the schema.  On the command line type </p>
<p>&gt;&gt;mysqldump --help </p>
<p>to see all your options.  (If you've installed MySQL using MacPorts then the command is mysqldump5).
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1782">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1783" class="alt">
		<div id="position-6">
			<div class="threadauthor">
				<a href="http://hackingthehumanities.org"><img alt="" src="http://www.gravatar.com/avatar/5eae155257da1e1fea52ff200be56161?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://hackingthehumanities.org">Patrick Murray-John</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/patrickmj"></a></small>
				</p>
				<div class="author-badges"><span title='50+ Posts' class='badge gold-poster 123'><!-- 50+ posts! --></span><span title='3+ Best Answers' class='badge bronze-answerer 3'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Good advice above. I'll add, though, that if you can back up the archives directory from the Omeka installation itself, it will be very valuable if you ever need it (hopefully not!).</p>
<p>That's because the database dump stores the connection between files and items via its own generated filename -- not what you have in the identifier field. That is, without having the files as Omeka recognizes them in the archives directory, you would risk losing the connection between item, metadata, and file, and would still end up having to recreate the connections. Trust me, this has the potential to make you cry!</p>
<p>So, if you use the script Lincoln linked to, modifying it to make sure you grab a copy of the archives directory as well (or the whole kit and kaboodle of your installation) will be very helpful.</p>
<p>Good luck
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1783">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1792">
		<div id="position-7">
			<div class="threadauthor">
				<a href="http://www.liquidfoot.com"><img alt="" src="http://www.gravatar.com/avatar/f8ea43bbfc6fe9de8794458d17999b8f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://www.liquidfoot.com">Wayne Graham</a></strong><br />
					<small><a href="/DH-Answers-Archive/profile/wsgrah">Member</a></small>
				</p>
				<div class="author-badges"><span title='20+ Posts' class='badge silver-poster 48'><!-- 20-49 posts --></span><span title='10+ Best Answers' class='badge silver-answerer 14'><!--10-24 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I run a lot of different Omeka instances and have to do all kinds of crazy deployments and maintenance. I packaged these all up in to a library that you can install (depends on Ruby) called <a href="https://rubygems.org/gems/omeka-recipes">omeka-recipes</a>. You can set up pretty complex server configurations (e.g. staging, production, development) and move databases around with the database tasks. It also has the ability to sync assets (images, etc.), as well as help manage deployments. It may be way overkill for your needs, but for me, it's what I use to manage all of my Omeka instances.</p>
<p>Basic usage:</p>


<div class="bb_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">cap db:mysql:dump
cap db:mysql:fetch_dump
cap omeka:sync_assets</pre></div></div>



<p>The first command will log on to your sever and generate a backup file for you (reading the db.ini file). The second will download the file to your local machine and the third will download everything in your archive directory to your local computer.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1792">Permalink</a> </div>
			</div>
		</div>
	</li>

</ol>
<div class="clearit"><br style=" clear: both;" /></div>
<p class="rss-link"><a href="/DH-Answers-Archive/rss/topic/what-is-the-easiest-way-to-automate-omeka-backups-to-a-local-machine" class="rss-link"><abbr title="Really Simple Syndication">RSS</abbr> feed for this topic</a></p>
<h2 class="post-form">Reply</h2>
<p>You must <a href="/DH-Answers-Archive/bb-login.php">log in</a> to post.</p>		</div>
			<div id="footer" role="contentinfo" class="span-24">
				<div id="lang-switch">
					<span class="lang-label">Language</span>
					<form id="bb_language_switcher" style="display:inline-block;"><select  style="width:150px;" name="bb_language_switcher" onchange="location.href='/answers/topic/what-is-the-easiest-way-to-automate-omeka-backups-to-a-local-machine?bblang=' + this.options[this.selectedIndex].value;">
<option value=''>Select...</option>	<option value="bg_BG">&nbsp;Bulgarian (BG) </option>
	<option value="continents-cities-sr_RS">&nbsp;Corsican</option>
	<option value="da_DK">&nbsp;Danish (DK) </option>
	<option style='background:#ECE9D8;color:#000;font-weight:bold;' value=" ">&nbsp;English</option>
	<option value="et_EE">&nbsp;Estonian (EE) </option>
	<option value="fr_FR">&nbsp;French (FR) </option>
	<option value="de">&nbsp;German</option>
	<option value="he_IL">&nbsp;Hebrew (IL) </option>
	<option value="hu_HU">&nbsp;Hungarian (HU) </option>
	<option value="id_ID">&nbsp;Indonesian (ID) </option>
	<option value="it_IT">&nbsp;Italian (IT) </option>
	<option value="ja">&nbsp;Japanese</option>
	<option value="pl_PL">&nbsp;Polish (PL) </option>
	<option value="pt_BR">&nbsp;Portuguese (BR) </option>
	<option value="pt_PT">&nbsp;Portuguese (PT) </option>
	<option value="ro_RO">&nbsp;Romanian (RO) </option>
	<option value="ru_RU">&nbsp;Russian (RU) </option>
	<option value="sr_RS">&nbsp;Serbian (RS) </option>
	<option value="sk">&nbsp;Slovak</option>
	<option value="sk_SK">&nbsp;Slovak (SK) </option>
	<option value="es_ES">&nbsp;Spanish (ES) </option>
	<option value="sv_SE">&nbsp;Swedish (SE) </option>
	<option value="th">&nbsp;Thai</option>
	<option value="ug_CN">&nbsp;Uyghur (CN) </option>
	<option value="uz_UZ">&nbsp;Uzbek (UZ) </option>
	<option value="vi">&nbsp;Vietnamese</option>
</select></form>
				</div>			
				<p>A project of the <a href="http://www.ach.org">Association for Computers and the Humanities</a> and the Chronicle of Higher Education's <a href="http://profhacker.com">ProfHacker</a></p>
				<p>Icons by <a href="http://www.famfamfam.com/lab/icons/silk/">famfamfam</a></p>
				<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</p>
				<p><a href="http://lib.virginia.edu/scholarslab"><img src="/DH-Answers-Archive/bb-templates/dhqa/images/slab-logo.jpg" alt="Scholars' Lab" title="Scholars' Lab"/></a></p>
			</div>
	</div>


</body>
</html>
