<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<title>Help with MALLET - topic generation going wrong! &laquo; Digital Humanities Questions &amp; Answers</title>
	<link rel="stylesheet" href="/bb-templates/dhqa/style.css" type="text/css" />
	<link rel="stylesheet" href="/bb-templates/dhqa/blueprint/screen.css" type="text/css" media="screen" title="blueprint-print" charset="utf-8"/>
	<link rel="stylesheet" href="/bb-templates/dhqa/blueprint/print.css" type="text/css" media="print" title="blueprint-print" charset="utf-8"/>
	<!--[if lt IE 8]>
	  <link rel="stylesheet" href="/bb-templates/dhqa/blueprint/ie.css" type="text/css" media="screen, projection">
	<![endif]-->
	<!--[if IE]>
		<style type="text/css" media="screen">
			.header-button, form.login input, input[type="submit"], #header div.search, form.login input {
				border-radius:4px;
				behavior: url(border-radius.htc);
			}
		</style>
	<![endif]-->
	<!--[if IE 7]>
		<style type="text/css" media="screen">
			#header .search .search-form input.submit {
				padding: 0;
				margin: 0;
				height: 29px;
				width: 70px;
			}
		</style>
	<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Digital Humanities Questions &amp; Answers &raquo; Topic: Help with MALLET - topic generation going wrong!" href="/rss/topic/help-with-mallet-topic-generation-going-wrong" />
<meta name="generator" content="bbPress 1.0.2" />

<link rel="stylesheet" href="/my-plugins/bb-syntax/bb-syntax.css" type="text/css" media="screen" />

<style type="text/css"><!--
.topic-icon-image {
	width: 20px;
	height: 20px;
	margin-right: 6px;
	position: relative;
	float: left;
}

.topic-icon-image a span {
	display: none;
}

.topic-icon-image a:hover {
	position: relative;
}

.topic-icon-image a:hover span {
	display: block;
   	position: absolute;
	top: 0px; 
	left: 10px;
   	padding: 5px; 
   	margin: 10px; 
   	z-index: 100;
   	background: #ffc; 
   	border: 1px dotted #333;
	opacity: 0.8;
	color: #000;
}
--></style><style type="text/css">
	.best_answer {text-decoration:none; border:0; white-space:nowrap; display:block; margin:1em 0;		
		border:0; text-decoration:none; width:20px; height:16px;
		background: url(/my-plugins/best-answer/best-answer.png) no-repeat scroll 0px 1px transparent;} 
	span.best_answer {margin: 0px; float: left;}
	#thread .threadauthor .best_answer {padding-left: 20px;}
	a.best_answer, a.best_answer:link {color:#999;}
	a.best_answer:hover {color:green;}	
	a.best_answer_selected {color: green;}
	a.best_answer_selected:hover {color:red;}		
	#thread li.best_answer_background { background-color: transparent; }
	#thread li.best_answer_background .threadpost { background-color: #afa; }
	#thread li.alt.best_answer_background .threadpost { background-color: #afa; }
	.best_answer_meta { background: url(/my-plugins/best-answer/best-answer.png) no-repeat scroll 5px 40% transparent; padding-left: 26px; }
</style>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<link rel='stylesheet' id='social-it-css'  href='/my-plugins/social-it/css/style-1.5.css' type='text/css' media='all' />
<script type='text/javascript' src='/bb-includes/js/jquery/jquery-1.2.6.js'></script>
<script type='text/javascript' src='/my-plugins/social-it/js/social-it-public-1.5.js'></script>
<!-- End Of Code Generated By Social It Plugin By www.gaut.am -->


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18811436-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body id="topic-page">
	<div class="container prepend-top append-bottom">
		<div id="util-login">
		<a href="/bb-login.php">Log in</a> | <a href="/register.php">Register</a>		</div>
		<div id="header" class="prepend-6 span-18">
			<a id="ach-logo" href="http://www.ach.org">ACH</a>
			<h1><a href="/">Digital Humanities Questions &amp; Answers</a></h1>
						<div class="login-container span-12">
				<form class="login" method="post" action="/bb-login.php">
		<div class="header-button ask-link"><a href="/bb-login.php">Ask a Question</a></div></form>			</div>

			<div class="search span-6 last">
<form class="search-form" role="search" action="/search.php" method="get">
	<p>
		<label class="hidden" for="q">Search:</label>
		<input type="text" size="10" maxlength="100" name="q" id="q" />
		<input class="submit" type="submit" value="Search &raquo;" />
	</p>
</form>
			</div>
		</div>
		<div id="main" class="span-24">

<div class="bbcrumb"><a href="/">Digital Humanities Questions &amp; Answers</a> &raquo; <a href="/forum/applications-tools-formats">Applications, Tools, Formats</a></div>
<div class="infobox" role="main">

<div id="topic-info">
<span id="topic_labels"></span>
<h2 class="topictitle">Help with MALLET - topic generation going wrong!</h2>
<span id="topic_posts">(6 posts)</span>
<span id="topic_voices">(2 voices)</span>

<ul class="topicmeta">
	<li>Asked 4 years ago by eesnyder</li>
	<li><a href="/topic/help-with-mallet-topic-generation-going-wrong#post-1706">Latest answer</a> from eesnyder</li>
</ul>
</div>

<div id="topic-tags">
<p>Tags:</p>


<ul id="tags-list" class="tags-list list:tag">
	<li id="tag-829_969"><a href="/tags/mallet" rel="tag">mallet</a> </li>
	<li id="tag-828_969" class="alt"><a href="/tags/topic-modelling" rel="tag">topic modelling</a> </li>
</ul>


</div>

<div style="clear:both;"></div>
</div>
<div id="ajax-response"></div>
<ol id="thread" class="list:post">

	<li id="post-1693">
		<div id="position-1">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/4bd6b3965f47e7474f5464ec8997403f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>eesnyder</strong><br />
					<small><a href="/profile/eesnyder">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 4'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I've installed MALLET 2.0.7 on my Windows 7 machine, installed Java &amp; ant, and set classpath variables. Built MALLET with ant and saw the build successful message. Then I imported my data into mallet format using <code>bin\mallet import-file --input data/mytext.txt --keep-sequence --stoplist-file stoplists/en.txt --output data/mytext.mallet</code></p>
<p>The problem is, when I go to train topics, it doesn't appear to be working. So, when I enter <code>bin\mallet train-topics --input data/mytext.mallet --output-topic-keys data/mytext/mytext.keys</code> I usually get 1000 runs of 10 groups of words. I'd hesitate to call them "topics" because, intuitively, they don't show any actual correlation from my text, and they don't repeat when I re-run it (I get totally new groupings). </p>
<p>Also, the second number, what I believe is supposed to be the Dirichlet parameter, doesn't change at all -- each visible iteration of the program, the parameter for each topic is 5.  Except every now and then when I add more initial variables (---num-topics 25, --doc-topics-threshold 0.1, and others) the parameter starts at 5, starts going up into the 80s (varying among the topics! so some in 10s, 20s, etc), and then blows up with a Java exception. Or sometimes it stays stable at 2, and the topics still don't make sense as topics!</p>
<p>A colleague of mine has this running on the same data, only he installed on a Mac and got topics that made sense, but he installed a while ago and has no idea what's going wrong with my version.</p>
<p>Any idea what I'm doing wrong?</p>
<p>Edited to add: uncompressed &amp; installed version 2.0.6, built with ant, and did clean imports of my data, and I'm seeing the same thing.
</p>

<!-- Start Of Code Generated By Social It Plugin By www.gaut.am -->
<div class="social-it" style=""><ul class="socials"><li class="socialit-twitter"><a href="http://twitter.com/home?status=Help+with+MALLET+-+topic+generation+going+wrong%21+-+http://bit.ly/KMKz3y+(via+@DHAnswers)" rel="nofollow" class="external" title="Tweet this question">Tweet this question</a></li></ul><div style="clear:both;"></div></div><!-- End Of Code Generated By Social It Plugin By www.gaut.am -->

</div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1693">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1694" class="alt">
		<div id="position-2">
			<div class="threadauthor">
				<a href="http://stefansinclair.name/"><img alt="" src="http://www.gravatar.com/avatar/cba4d537795cd02764c6a5c778c21566?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://stefansinclair.name/">Stéfan Sinclair</a></strong><br />
					<small><a href="/profile/stefansinclair">Admin</a></small>
				</p>
				<div class="author-badges"><span title='50+ Posts' class='badge gold-poster 102'><!-- 50+ posts! --></span><span title='3+ Best Answers' class='badge bronze-answerer 6'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Quick question that probably wouldn't affect the results you're seeing: is the space between <strong>--</strong> and <strong>output-topic-keys</strong> an artifact of copy-and-pasting into this forum or is it really in the command you ran?
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1694">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1695">
		<div id="position-3">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/4bd6b3965f47e7474f5464ec8997403f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>eesnyder</strong><br />
					<small><a href="/profile/eesnyder">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 4'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Whoops! That was me re-typing, not in the command I ran. I'll clean it up in the post.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1695">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1697" class="alt">
		<div id="position-4">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/4bd6b3965f47e7474f5464ec8997403f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>eesnyder</strong><br />
					<small><a href="/profile/eesnyder">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 4'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>Okay, so I've narrowed down the problem to a more specific issue with hyperparameterization. </p>
<p>When I have the --optimize-interval turned off, I get non-optimized topics (which seem less recognizable as topics -- I get generally better topics with it turned on; this is where the repeating parameter occurs, I recognize now).  When I run 1000 iterations with --optimize-interval 10, it runs for a while, then the parameter numbers climb up over 100, then I get a Java array out of bounds exception at iteration 420 and everything crashes.  I can "cheat" this by setting the interval to 50, but it just postpones the climb &amp; crash to a point beyond 1000 iterations.</p>
<p>Specifically, I'm getting a <code>java.lang.ArrayIndexOutofBoundsException at cc.mallet.topics.WorkerRunnable.sampleTopicsforOneDoc(WorkerRunnable.java:489)</code></p>
<p>Any ideas?  I've installed this on Windows 7 and XP machines to test, and I'm having the same issue on both. Might install it on a Mac soon just to see if it does anything different.
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1697">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1699">
		<div id="position-5">
			<div class="threadauthor">
				<a href="http://stefansinclair.name/"><img alt="" src="http://www.gravatar.com/avatar/cba4d537795cd02764c6a5c778c21566?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://stefansinclair.name/">Stéfan Sinclair</a></strong><br />
					<small><a href="/profile/stefansinclair">Admin</a></small>
				</p>
				<div class="author-badges"><span title='50+ Posts' class='badge gold-poster 102'><!-- 50+ posts! --></span><span title='3+ Best Answers' class='badge bronze-answerer 6'><!-- 3-9 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I suspect someone with more experience with the parameters could explain why you're encountering a problem, but in the meantime I'm willing to try on my Mac machine if your data set is available and you can provide the exact commands you've tried (importing and modelling phases).
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1699">Permalink</a> </div>
			</div>
		</div>
	</li>
	<li id="post-1706" class="alt">
		<div id="position-6">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/4bd6b3965f47e7474f5464ec8997403f?s=48&amp;d=identicon&amp;r=pg" class="photo avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>eesnyder</strong><br />
					<small><a href="/profile/eesnyder">Member</a></small>
				</p>
				<div class="author-badges"><span class='badge 4'><!-- fewer than 5 posts --></span><span class='badge 0'><!-- fewer than 3 answers --></span></div>
			</div>
			<div class="threadpost">
				<div class="post"><p>I can send you the data (it's very small) &amp; the commands. I'll DM you on Twitter for your email?</p>
<p>If we get this sorted out I'll come back &amp; post the answer here for the record!
</p></div>
				<div class="poststuff">Posted 4 years ago <a class="post-perma-link" href="#post-1706">Permalink</a> </div>
			</div>
		</div>
	</li>

</ol>
<div class="clearit"><br style=" clear: both;" /></div>
<p class="rss-link"><a href="/rss/topic/help-with-mallet-topic-generation-going-wrong" class="rss-link"><abbr title="Really Simple Syndication">RSS</abbr> feed for this topic</a></p>
<h2 class="post-form">Reply</h2>
<p>You must <a href="/bb-login.php">log in</a> to post.</p>		</div>
			<div id="footer" role="contentinfo" class="span-24">
				<div id="lang-switch">
					<span class="lang-label">Language</span>
					<form id="bb_language_switcher" style="display:inline-block;"><select  style="width:150px;" name="bb_language_switcher" onchange="location.href='/answers/topic/help-with-mallet-topic-generation-going-wrong?bblang=' + this.options[this.selectedIndex].value;">
<option value=''>Select...</option>	<option value="bg_BG">&nbsp;Bulgarian (BG) </option>
	<option value="continents-cities-sr_RS">&nbsp;Corsican</option>
	<option value="da_DK">&nbsp;Danish (DK) </option>
	<option style='background:#ECE9D8;color:#000;font-weight:bold;' value=" ">&nbsp;English</option>
	<option value="et_EE">&nbsp;Estonian (EE) </option>
	<option value="fr_FR">&nbsp;French (FR) </option>
	<option value="de">&nbsp;German</option>
	<option value="he_IL">&nbsp;Hebrew (IL) </option>
	<option value="hu_HU">&nbsp;Hungarian (HU) </option>
	<option value="id_ID">&nbsp;Indonesian (ID) </option>
	<option value="it_IT">&nbsp;Italian (IT) </option>
	<option value="ja">&nbsp;Japanese</option>
	<option value="pl_PL">&nbsp;Polish (PL) </option>
	<option value="pt_BR">&nbsp;Portuguese (BR) </option>
	<option value="pt_PT">&nbsp;Portuguese (PT) </option>
	<option value="ro_RO">&nbsp;Romanian (RO) </option>
	<option value="ru_RU">&nbsp;Russian (RU) </option>
	<option value="sr_RS">&nbsp;Serbian (RS) </option>
	<option value="sk">&nbsp;Slovak</option>
	<option value="sk_SK">&nbsp;Slovak (SK) </option>
	<option value="es_ES">&nbsp;Spanish (ES) </option>
	<option value="sv_SE">&nbsp;Swedish (SE) </option>
	<option value="th">&nbsp;Thai</option>
	<option value="ug_CN">&nbsp;Uyghur (CN) </option>
	<option value="uz_UZ">&nbsp;Uzbek (UZ) </option>
	<option value="vi">&nbsp;Vietnamese</option>
</select></form>
				</div>			
				<p>A project of the <a href="http://www.ach.org">Association for Computers and the Humanities</a> and the Chronicle of Higher Education's <a href="http://profhacker.com">ProfHacker</a></p>
				<p>Icons by <a href="http://www.famfamfam.com/lab/icons/silk/">famfamfam</a></p>
				<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</p>
				<p><a href="http://lib.virginia.edu/scholarslab"><img src="/bb-templates/dhqa/images/slab-logo.jpg" alt="Scholars' Lab" title="Scholars' Lab"/></a></p>
			</div>
	</div>


</body>
</html>
